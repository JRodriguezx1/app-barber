function scrolnav(){document.querySelectorAll(".dashboard__menu a").forEach((function(e){if(e.classList.contains("dashboard__enlace--actual")){document.querySelector("."+e.firstElementChild.nextElementSibling.textContent).scrollIntoView({behavior:"smooth"})}}))}!function(){if(document.querySelector("#dashboardcitas")){const c=document.querySelector("#filtros-personalizado"),s=document.querySelector("#selectprofesional"),d=document.querySelector("#fecha"),u=document.querySelector("#crearcita"),m=document.querySelectorAll(".programar");c.addEventListener("click",()=>{let e=s.options[s.options.selectedIndex].value;e&&Swal.fire({customClass:{},title:"Consulta el profesional por fecha:",html:`<form class="formulario" action="/admin/citas/consultaxprofesxfecha?pagina=1" method="POST">    \n                                <div class="formulario__campo">\n                                    <input class="formulario__input" id="fecha" type="date" name="fecha" value=" " required>\n                                </div>\n                                <input type="hidden" name="profesional" value="${e}">\n                                <input class="btnsmall" type="submit" value="Consultar">\n                        </form>`,showCancelButton:!1,showConfirmButton:!1})}),d.addEventListener("input",e=>{window.location="/admin/citas/filtroxfecha?pagina=1&fecha="+e.target.value});let p,f,v,h,_,b,g,y,S,C=[],E=[];function e(e,t,n,a){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:e,html:`<form class="formulario formclientes" action="${n}" method="POST">\n                            <input type="hidden" id="id_empserv" name="id_empserv" value="" >\n                            <input type="hidden" id="hora_fin" name="hora_fin" value="" >\n\n                            <div class="">\n                                ${a}\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="servicio">Seleccione Servicio: </label>\n                                    <select class="formulario__select" name="servicio" id="servicios" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="profesional">Seleccione Profesional: </label>\n                                    <select class="formulario__select" name="profesional" id="professionals" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="fecha">Seleccionar Fecha:</label>\n                                    <input class="formulario__input" id="date" name="fecha_fin" type="date" disabled required>\n                                </div>\n                            </div>\n                            \n                            <div class="cliente__campohoras" id="horas">\n\n                            </div>\n                            <input class="clientes-btn" type="submit" value="${t}">\n                       </form>`,showCancelButton:!0,showConfirmButton:!1})}function t(){const e=document.querySelector("#servicios");f.forEach(t=>{const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}),e.addEventListener("change",e=>n(e.target.value))}function n(e){const t=document.querySelector("#professionals"),n=v.filter(t=>t.idservicio===e);r(t),document.querySelector("#date").disabled=!0,r(document.querySelector("#horas"));const a=document.createElement("OPTION");a.value="",a.textContent=" -Selecionar- ",a.selected=!0,a.disabled=!0,t.appendChild(a),n.forEach(e=>{const n=document.createElement("OPTION");n.value=e.idempleado,n.textContent=e.nombre,n.dataset.id=e.id,t.appendChild(n)}),t.addEventListener("change",e=>{document.querySelector("#date").disabled=!1,document.querySelector("#date").value="",function(){const e=document.querySelector("#date"),t=new Date,n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();let l=`${n}-${a}-${o}`;a<10&&(l=`${n}-0${a}-${o}`);a<10&&o<10&&(l=`${n}-0${a}-0${o}`);a>=10&&o<10&&(l=`${n}-${a}-0${o}`);e.min=l}(),r(document.querySelector("#horas"))})}function a(){document.querySelector("#date").addEventListener("input",e=>{r(document.querySelector("#horas"));const t=new Date(e.target.value);o(e.target.value,t.getUTCDay())})}function o(e,t){const n=document.querySelector("#professionals"),a=n.options[n.options.selectedIndex].value;document.querySelector("#id_empserv").value=n.options[n.options.selectedIndex].dataset.id,y=_["empleado_"+a],g=h.filter(e=>a===e.empleado_id),S=b.filter(t=>t.idempleado===a&&t.fecha_fin===e&&"Pendiente"===t.estado);if(g.some(t=>t.fecha===e))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const e=y.filter(e=>e.id_dia==(0===t?7:t));e.length?function(e){let t=[],n=[];t=[...t,e.inicioturno,e.inidescanso],n=[...n,e.findescanso,e.finturno],t=t.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),n=n.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),E=S.map(e=>e.hora_fin);for(let e=0;e<t.length-1;e++)l(t[e],t[e+1]);for(let e=0;e<n.length-1;e++)l(n[e],n[e+1]);console.log(C),function(){const e=document.querySelector("#horas");C.forEach(t=>{const n=document.createElement("DIV");n.classList.add("cliente__hora");const a=document.createElement("P");a.textContent=t,a.dataset.hora=t,a.onclick=i,a.classList.add("texthora"),n.appendChild(a),e.appendChild(n)})}()}(e[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}function l(e,t){const n=new Date("01/01/2000 "+e),a=new Date("01/01/2000 "+t);for(;n<a;){const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");E.includes(`${e}:${t}`)||(C=[...C,`${e}:${t}`]),n.setTime(n.getTime()+18e5)}}function i(e){const t=document.querySelector(".horaselect");t&&t.classList.remove("horaselect"),e.target.parentElement.classList.add("horaselect"),document.querySelector("#hora_fin").value=e.target.textContent}function r(e){for(C=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}(async()=>{try{const e="/admin/api/allclientes",t=await fetch(e);p=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getservices",t=await fetch(e);f=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);v=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);h=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);_=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);b=await t.json()}catch(e){console.log(e)}})(),u.addEventListener("click",n=>{n.preventDefault();e("Crear Cita","Crear","/admin/citas/crear?pagina=1",'<div class="formulario__campo">\n                                <label class="formulario__label" for="servicio">Seleccione Usuario: </label>\n                                <select class="formulario__select" name="id_usuario" id="usuario" required>\n                                    <option value="" disabled selected> -Selecionar- </option>\n                                </select>\n                            </div>'),function(){const e=document.querySelector("#usuario");p.forEach(t=>{const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre+" "+t.apellido,e.appendChild(n)})}(),t(),a()}),m.forEach(l=>{l.addEventListener("click",l=>{"Pendiente"===l.target.parentElement.parentElement.previousElementSibling.textContent&&(e("Reprogramar Cita A:","Enviar","/admin/citas?pagina=1",'<span class="namecliente"></span><span id="horacita"></span>\n                                <input type="hidden" id="id" name="id" value="" >'),function(e){t();const l=e.parentElement.parentElement.parentElement,i=l.children[0].textContent,r=l.children[1].textContent,c=l.children[3].textContent,s=l.children[4].textContent,d=l.children[5].textContent,u=l.children[6].textContent,m=document.querySelector(".namecliente"),p=document.querySelector("#servicios"),f=document.querySelector("#professionals"),v=document.querySelector("#date");m.textContent=r+" - ",document.querySelector("#horacita").textContent=u,document.querySelector("#id").value=i,document.querySelector("#hora_fin").value=u;for(let e=0;e<p.options.length;e++)p.options[e].textContent===c&&(p.options[e].selected=!0);n(p.options[p.options.selectedIndex].value);for(let e=0;e<f.options.length;e++)f.options[e].textContent===s&&(f.options[e].selected=!0,document.querySelector("#id_empserv").value=f.options[e].dataset.id);v.value=d,a();const h=new Date(d);o(d,h.getUTCDay())}(l.target))})})}}(),function(){if(document.querySelector(".clientes")){const n=document.querySelector("#crearcliente"),a=document.querySelectorAll("#editar"),o=document.querySelectorAll("#eliminar");let l={titulo:"",url:"",submit:"",nombre:"",apellido:"",movil:"",email:""};function e(e,t){let{titulo:n,url:a,submit:o,nombre:l,apellido:i,movil:r,email:c}=e;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:n,html:`<form class="formulario formclientes" action="${a}" method="POST">\n                            <input type="hidden" name="id" value="${t}" >\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nombre">Nombre:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nombre del cliente" id="nombre" name="nombre" value="${l}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="apellido">Apellido:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Apellido del cliente" id="apellido" name="apellido" value="${i}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="movil">Movil</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="number" placeholder="Movil del cliente" id="movil" name="movil" value="${r}" required>\n                                    <label data-num="10" class="count-charts" for="">10</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="email">Email</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="email" placeholder="Email del cliente" id="email" name="email" value="${c}" required>\n                                    <label data-num="40" class="count-charts" for="">40</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="password">Password</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="password" placeholder="Password del cliente" id="password" name="password" required>\n                                    <label data-num="12" class="count-charts" for="">12</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="password2">Repetir Password</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="password" placeholder="Repetir Password" id="password2" name="password2" required>\n                                    <label data-num="12" class="count-charts" for="">12</label>\n                                </div>\n                            </div>\n                            <input class="clientes-btn" type="submit" value="${o}">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1})}function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})}n.addEventListener("click",()=>{l.titulo="Crear Cliente Nuevo",l.url="/admin/clientes/crear",l.submit="Crear Cliente",l.nombre="",l.apellido="",l.movil="",l.email="",e(l,0),t()}),a.forEach(n=>{n.addEventListener("click",n=>{l.titulo="Actualizar Cliente",l.url="/admin/clientes/actualizar",l.submit="Actualizar";const a=n.target.parentElement.parentElement.parentElement;l.nombre=a.children[1].textContent,l.apellido=a.children[2].textContent,l.movil=a.children[3].textContent,l.email=a.children[4].textContent,e(l,n.target.parentElement.dataset.id),t()})}),o.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el cliente?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/clientes/eliminar?id="+t)})})})}}(),function(){if(document.querySelector(".barraprogreso")){const e=document.querySelectorAll("#negocio"),t=document.querySelector(".barraprogreso__label"),n=document.querySelector(".barraprogreso__barra");let a=0;e.forEach(e=>{e.value&&a++}),n.classList.add("animation"),t.textContent=(100*a/11).toFixed(1)+"%";document.querySelector(".animation").style.width=t.textContent}if(document.querySelector(".cambiopaginas")){const e=document.querySelectorAll(".cambiopaginas span");e[0].classList.add("resaltar"),document.querySelector(".perfil")?document.querySelector(".pagina3").classList.add("mostrarseccion"):document.querySelector(".pagina1").classList.add("mostrarseccion"),e.forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("resaltar")||(e.forEach(e=>e.classList.remove("resaltar")),t.target.classList.add("resaltar"));document.querySelectorAll(".paginas").forEach(e=>e.classList.remove("mostrarseccion")),document.querySelector("."+t.target.id).classList.add("mostrarseccion")})})}document.querySelectorAll("input[type=checkbox]").forEach(e=>{e.addEventListener("change",(function(e){if(this.checked)for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!1;else for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!0}))});document.querySelectorAll("#entrada").forEach(e=>{e.addEventListener("change",e=>{!function e(t,n){for(;t.firstChild;)t.removeChild(t.firstChild);let a=n.target.value.split(":"),o=parseInt(a[0]+a[1]);for(let e=0;o<2300;e++){let e=document.createElement("OPTION");o+=30,o%100==60&&(o+=40),e.value=o,a[0]=parseInt(o/100),a[1]=o%100,0===a[1]&&(a[1]="00"),e.textContent=a[0]+":"+a[1],t.appendChild(e)}t.addEventListener("change",t=>{let n=t.target.nextElementSibling;n&&e(n,t)})}(e.target.nextElementSibling,e)})})}(),document.addEventListener("DOMContentLoaded",(function(){scrolnav()})),function(){if(document.querySelector("#dash-cliente")){const t=document.querySelector("#servicio"),n=document.querySelector("#profesional"),a=document.querySelector("#date"),o=document.querySelectorAll("#cancelado");let l;function e(e){for(horasdisponibles=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}a.disabled=!0,(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);l=await t.json()}catch(e){console.log(e)}})(),function(){const e=document.querySelector("#date"),t=new Date;t.setDate(t.getDate()+1);const n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();let l=`${n}-${a}-${o}`;a<10&&o<10&&(l=`${n}-0${a}-0${o}`);a<10&&o>=10&&(l=`${n}-0${a}-${o}`);a>=10&&o<10&&(l=`${n}-${a}-0${o}`);e.min=l}(),t.addEventListener("change",t=>{a.disabled=!0;const o=l.filter(e=>e.idservicio===t.target.value);e(n),e(document.querySelector("#horas"));const i=document.createElement("OPTION");i.value="",i.textContent=" -Selecionar- ",i.selected=!0,i.disabled=!0,n.appendChild(i),o.forEach(e=>{const t=document.createElement("OPTION");t.value=e.idempleado,t.textContent=e.nombre,t.dataset.id=e.id,n.appendChild(t)})}),o.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,n=t.children[2].textContent,a=t.children[3].textContent,o=t.children[6].textContent;let l=new Date(n+"T"+a),i=new Date;"Pendiente"===o&&l-i>=36e5&&function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES SOLICITAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&(async()=>{try{const n="/admin/api/cancelarcita?id="+e,a=await fetch(n);await a.json()&&(t.textContent="Cancelado",Swal.fire("Cita Cancelada","","success"))}catch(e){console.log(e)}})()})}(e.target.parentElement.dataset.id,t.children[6])})})}}(),function(){if(document.querySelector("#dash-cliente")){let a=[],o=[];const l=document.querySelector("#horas");function e(e,t){const n=new Date("01/01/2000 "+e),l=new Date("01/01/2000 "+t);for(;n<l;){const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");o.includes(`${e}:${t}`)||(a=[...a,`${e}:${t}`]),n.setTime(n.getTime()+18e5)}}const i=document.querySelector("#profesional"),r=document.querySelector("#date");let c,s,d,u,m,p;function t(e){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Reservar La Cita?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{if(t.isConfirmed){(async function(e){const t=new FormData,n=i.options[i.options.selectedIndex],a=new Date;t.append("id_empserv",n.dataset.id),t.append("fecha_inicio",a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()),t.append("fecha_fin",r.value),t.append("hora",a.toLocaleTimeString()),t.append("hora_fin",e);try{const e="/admin/api/enviarcita",n=await fetch(e,{method:"POST",body:t});return!!(await n.json())[0]}catch(e){console.log(e)}})(e.target.dataset.hora)&&(Swal.fire("Cita Programada","","success"),setTimeout(()=>{window.location.reload()},1500))}})}function n(e){for(a=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);c=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);s=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);d=await t.json()}catch(e){console.log(e)}})(),i.addEventListener("change",e=>{n(l),r.disabled=!1,r.value="",m=s["empleado_"+e.target.value],u=c.filter(t=>e.target.value===t.empleado_id)}),r.addEventListener("input",r=>{n(l);const c=new Date(r.target.value);!function(n,r){const c=i.options[i.options.selectedIndex].value;p=d.filter(e=>e.idempleado===c&&e.fecha_fin===n&&"Pendiente"===e.estado);if(u.some(e=>e.fecha===n))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const n=m.filter(e=>e.id_dia==(0===r?7:r));n.length?function(n){let i=[],r=[];i=[...i,n.inicioturno,n.inidescanso],r=[...r,n.findescanso,n.finturno],i=i.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),r=r.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),o=p.map(e=>e.hora_fin);for(let t=0;t<i.length-1;t++)e(i[t],i[t+1]);for(let t=0;t<r.length-1;t++)e(r[t],r[t+1]);console.log(a),a.forEach(e=>{const n=document.createElement("DIV");n.classList.add("cliente__hora");const a=document.createElement("P");a.textContent=e,a.dataset.hora=e,a.onclick=t,a.classList.add("texthora"),n.appendChild(a),l.appendChild(n)})}(n[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}(r.target.value,c.getUTCDay())})}}(),function(){if(document.querySelector(".formulario__fieldset--servicios")){const a=document.querySelector(".pagina1 .formulario__campostags"),o=document.querySelector(".pagina4 .formulario__campostags"),l=document.querySelector(".pagina1 .formulario__tagselect"),i=document.querySelector(".pagina4 .formulario__tagselect"),r=document.querySelector('.pagina1 [name="servicios"]'),c=document.querySelector('.pagina4 [name="servicios"]'),s=document.querySelector("#selectemployee"),d=document.querySelector("#eliminaremployee");let u,m=[],p=[],f=[];l.classList.add("selectskills1");for(let e=1;e<i.options.length;e++){let t={id:i.options[e].value,nombre:i.options[e].textContent};m=[...m,t]}function e(e,a,o){const l=document.createElement("DIV");l.classList.add("formulario__tag");const i=document.createElement("SPAN");i.textContent=e,i.id=a;const r=document.createElement("I");return r.classList.add("fa-solid"),r.classList.add("fa-rectangle-xmark"),r.onclick=function(e){!function(e,a){let o=e.target.previousElementSibling;n(a,{id:o.id,nombre:o.textContent}),e.target.parentElement.remove(),a.classList.contains("selectskills1")?p=p.filter(e=>e!=o.id):f=f.filter(e=>e!=o.id);t()}(e,o)},l.appendChild(i),l.appendChild(r),l}function t(){r.value=p.toString(),c.value=f.toString()}function n(e,t){const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}(async()=>{try{const e="/admin/api/getAllemployee",t=await fetch(e);u=await t.json()}catch(e){console.log(e)}})(),l.addEventListener("change",n=>{p=[...p,n.target.options[l.options.selectedIndex].value];let o=e(n.target.options[l.options.selectedIndex].textContent,n.target.options[l.options.selectedIndex].value,l);a.appendChild(o),l.options[l.options.selectedIndex].remove(),l.options[0].selected=!0,t()}),s.addEventListener("change",a=>{let l;document.querySelectorAll(".pagina4 .formulario__tag").forEach(e=>{e.remove()}),d.href="/admin/configuracion/eliminaremployee?id="+a.target.value,l=u.filter(e=>e.id==a.target.value),function(a){const{servicios:l}=a[0];document.querySelector(".pagina4 #nombre").value=a[0].nombre,document.querySelector(".pagina4 #apellido").value=a[0].apellido,document.querySelector(".pagina4 #movil").value=a[0].movil,document.querySelector(".pagina4 #email").value=a[0].email,document.querySelector(".pagina4 #departamento").value=a[0].departamento,document.querySelector(".pagina4 #ciudad").value=a[0].ciudad,document.querySelector(".pagina4 #direccion").value=a[0].direccion,f=[],m.forEach(e=>{let t=1;for(;t<i.options.length&&e.id!=i.options[t].value;t++);t===i.options.length&&n(i,{id:e.id,nombre:e.nombre})}),l.forEach(t=>{f=[...f,t.id];let n=e(t.nombre,t.id,i);o.appendChild(n),i.querySelector(`option[value="${t.id}"`)&&i.querySelector(`option[value="${t.id}"`).remove()}),i.options[0].selected=!0,t()}(l)}),i.addEventListener("change",n=>{f=[...f,n.target.options[i.options.selectedIndex].value];let a=e(n.target.options[i.options.selectedIndex].textContent,n.target.options[i.options.selectedIndex].value,i);o.appendChild(a),i.options[i.options.selectedIndex].remove(),i.options[0].selected=!0,t()}),d.addEventListener("click",e=>{e.preventDefault(),e.target.href.includes("?id=")&&Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el empleado?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(window.location=e.target.href)})})}}(),function(){if(document.querySelector(".facturacion")){let t;(async()=>{try{const e="/admin/api/getservices",n=await fetch(e);t=await n.json()}catch(e){console.log(e)}})();document.querySelector("#fecha").addEventListener("input",e=>{window.location="/admin/facturacion/buscarxfecha?pagina=1&fecha="+e.target.value});function e(){const e=document.querySelector("#devolucion"),t=parseInt(document.querySelector("#total").value),n=parseInt(document.querySelector("#recibido").value);e.value=n>=t?n-t:""}document.querySelector("#pagar").addEventListener("click",()=>{Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Pago De Servicio",html:'<form class="formulario formclientes" action="/admin/facturacion" method="POST">\n                            <input type="hidden" name="idcita" value="1">\n                            <input type="hidden" name="valor_servicio" value="" >\n                            <input type="hidden" name="dcto" value="0">\n                            <input type="hidden" name="valordcto" value="0">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="servicios">Servicios:</label>\n                                <select class="formulario__select" name="idservicio" id="selectservice" required>\n                                    <option value="" disabled selected> Seleccionar Servicio</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="total">Total a pagar:</label>\n                                <input class="formulario__input" type="number" id="total" name="total" value="" readonly required>\n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",e),function(){const e=document.querySelector("#selectservice");t.forEach(t=>{const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}),e.addEventListener("change",e=>function(e){const n=document.querySelector("#total"),a=t.filter(t=>t.id==e.target.value);n.value=a[0].precio,document.querySelector("input[name=valor_servicio]").value=n.value,document.querySelector("#recibido").value="",document.querySelector("#devolucion").value=""}(e))}(),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})})}}(),function(){if(document.querySelector(".descpagina3")){const t=document.querySelector("#selectemployeedate"),n=document.querySelector(".viewdates");let a;async function e(e){console.log(e.target.id);try{const t="/admin/api/deletefechadesc?id="+e.target.id,n=await fetch(t);1==await n.json()&&document.querySelector(`i[id="${e.target.id}"]`).parentElement.remove()}catch(e){console.log(e)}}(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);a=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const o=a.filter(e=>e.empleado_id==t.target.value);!function(){for(;n.firstChild;)n.removeChild(n.firstChild)}(),function(t){t.forEach(t=>{const a=document.createElement("DIV");a.classList.add("viewdates__viewdate"),a.dataset.id=t.id;const o=document.createElement("P");o.classList.add("viewdates__fecha"),o.textContent=t.fecha;const l=document.createElement("I");l.classList.add("fa-solid","fa-rectangle-xmark"),l.id=t.id,l.onclick=e,a.appendChild(o),a.appendChild(l),n.appendChild(a)})}(o)})}}(),function(){if(document.querySelector(".dctoindividual")){const e=document.querySelectorAll("#editar"),t=document.querySelectorAll("#eliminar");let n={nombre:"",descripcion:"",dcto:"",fecha_fin:""};e.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.dataset.id,a=e.target.parentElement.parentElement.parentElement;n.nombre=a.children[1].textContent,n.fecha_fin=a.children[3].textContent,n.descripcion=a.children[4].textContent,n.dcto=a.children[5].textContent,function(e){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Actualizar Oferta",html:`<form class="formulario formclientes" action="/admin/fidelizacion/editar_dctoindividual" method="POST">\n                            <input type="hidden" name="id" value="${e}" >\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nombre">Nombre:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" value="${n.nombre}" readonly required>\n                                </div>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descripcion">Descripcion:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Descripcion de la oferta" id="descripcion" name="descripcion" value="${n.descripcion}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Descuento</label>\n                                <input class="formulario__input" min="1" max="100" type="number" placeholder="Descuento en porcentaje" id="descuento" name="descuento" value="${n.dcto}" requiered>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="fecha">Fecha</label>\n                                <input class="formulario__input" type="date" id="fecha" name="fecha" value="${n.fecha_fin}" requiered>\n                            </div>\n                            \n                            <input class="clientes-btn" type="submit" value="Actualizar">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1})}(t),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})})}),t.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar la oferta del cliente?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/fidelizacion/eliminar_dctoindividual?id="+t)})})})}}(),function(){if(document.querySelector("#dashboardcitas")){const n=document.querySelectorAll(".cancelado"),a=document.querySelectorAll(".finalizado");let o;function e(e){document.querySelector("#total").value=o;const n=parseInt(e.target.value),a=parseInt(document.querySelector("#total").value);document.querySelector("#total").value=a-n*a/100,document.querySelector("#valordcto").value=a-document.querySelector("#total").value,t()}function t(){const e=document.querySelector("#devolucion"),t=parseInt(document.querySelector("#total").value),n=parseInt(document.querySelector("#recibido").value);e.value=n>=t?n-t:""}n.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,n=t.children[0].textContent;"Pendiente"===t.children[7].textContent&&function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES CREAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&(async()=>{try{const n="/admin/api/cancelarcita?id="+e,a=await fetch(n);await a.json()&&(t.textContent="Cancelado",Swal.fire("Cita Cancelada","","success"))}catch(e){console.log(e)}})()})}(n,t.children[7])})}),a.forEach(n=>{n.addEventListener("click",n=>{"Pendiente"===n.target.parentElement.parentElement.parentElement.children[7].textContent&&(Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Terminar Cita",html:'<form class="formulario formclientes" action="/admin/citas/finalizar?pagina=1" method="POST">\n                            <input type="hidden" name="id" value="" >\n                            <input type="hidden" name="valor_servicio" value="" >\n                            <input type="hidden" name="valordcto" value="0" >\n\n                            <p class="orden"></p>\n                            <span class="nameuser"></span>\n                            <span class="nameservice"></span>\n                            <span class="precio"></span>\n\n                            <div class="">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="dcto">Aplicar Dcto:</label>\n                                <select class="formulario__select" name="dcto" id="dcto">\n                                    <option value="" disabled selected> Seleccionar Dcto</option>\n                                    <option value="0"> Sin Descuento</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="total">Total: </label>\n                                <input class="formulario__input" type="number" id="total" name="total" value="" readonly required>\n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",t),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})}),function(n){const a=n.target.parentElement.dataset.dctogeneral,l=n.target.parentElement.parentElement.parentElement,i=l.children[0].textContent,r=l.children[1].textContent,c=l.children[3].textContent;o=l.children[3].dataset.precio,document.querySelector("input[name=id]").value=i,document.querySelector("input[name=valor_servicio]").value=o,document.querySelector(".orden").textContent="Orden: "+i,document.querySelector(".nameuser").textContent=r,document.querySelector(".nameservice").textContent=c,document.querySelector(".precio").textContent="Precio: $"+o;const s=document.querySelector("#dcto"),d=document.createElement("option");d.textContent=a+"%",d.value=a,s.appendChild(d),s.addEventListener("change",e);const u=document.querySelector("#total");u.value=o,u.addEventListener("input",t)}(n))})})}}(),function(){if(document.querySelector("#servicios-grafica")){let e,t,n,a,o=0;citas100=0,progreso=440,(async()=>{try{const l="/admin/api/alldays",i=await fetch(l),r=await i.json(),c="/admin/api/totalcitas",s=await fetch(c),d=await s.json();r.reverse(),e=r.map(e=>e.fecha),t=r.map(e=>e.totaldia),n=d.length,a=d.filter(e=>"Finalizada"===e.estado),o=a.reduce((e,t)=>e+parseInt(t.facturacion.total),0),n&&(citas100=100*a.length/n),progreso=440*citas100/100,function(){const n=document.getElementById("servicios-grafica").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:[{label:"# of Votes",data:t,borderColor:"#00c8c2",backgroundColor:"#ea580c"}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}(),function(){const e=document.querySelector("circle");e.style.strokeDashoffset=440-progreso,e.classList.add("animacion");document.querySelector(".dailyearning").textContent="$"+o;document.querySelector(".rueda .numero").textContent=Math.round(citas100)+"%"}()}catch(e){console.log(e)}})()}}(),function(){if(document.querySelector(".pagina2malla")){const t=document.querySelector("#selectempleadomalla");let n;function e(e,t){for(let n=0;t<2300;n++){let n=document.createElement("OPTION");(t+=30)%100==60&&(t+=40),n.value=t,n.textContent=t%100==0?parseInt(t/100)+":00":parseInt(t/100)+":"+t%100,e.appendChild(n)}}(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);n=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const a=n["empleado_"+t.target.value];document.querySelectorAll('INPUT[type="checkbox"]').forEach(e=>{if(e.checked){e.checked=!1;for(let t=0;t<4;t++)e.parentElement.nextElementSibling.children[t].disabled=!0,0===t?e.parentElement.nextElementSibling.children[0].value="":e.parentElement.nextElementSibling.children[t].options[0].selected=!0}}),a.forEach(t=>{const{inicioturno:n,inidescanso:a,findescanso:o,finturno:l}=t;let i=new Array(n,a,o,l);const r=document.querySelector(`input[data-id="${t.id_dia}"]`);r.checked=!0;for(let e=0;e<4;e++)r.parentElement.nextElementSibling.children[e].disabled=!1;document.querySelector(`#entrada[data-id="${t.id_dia}"]`).value=n.substring(0,2)+":"+n.substring(2,4);let c=document.querySelector(`#inidescanso[data-id="${t.id_dia}"]`);for(let t=0;t<3;t++){e(c,parseInt(i[t]));for(let e=0;e<c.options.length;e++)c.options[e].value==parseInt(i[t+1])&&(c.options[e].selected=!0);c=c.nextElementSibling}})})}}(),function(){if(document.querySelector(".headerapp__menu")){const e=document.querySelector("#btnmenu"),t=document.querySelector(".headerapp__navmenu");e.addEventListener("click",()=>{t.classList.toggle("mostrar")})}}(),function(){const e=document.querySelectorAll("#servicio");function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})}document.querySelectorAll(".servicios__eliminar").forEach(e=>{e.addEventListener("click",e=>{let t;e.target.href="/admin/servicios/eliminar",e.preventDefault(),t="I"===e.target.tagName?e.target.parentElement.parentElement.dataset.id:e.target.parentElement.dataset.id,Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el servcio?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{if(e.isConfirmed){Swal.fire("Eliminado","","success"),async function(){const e=new FormData;console.log(t),e.append("id",t);try{const n="/admin/api/eliminarservicio",a=await fetch(n,{method:"POST",body:e}),o=await a.json();console.log(o);document.querySelector(`div[data-id="${t}"]`).remove()}catch(e){console.log(e)}}()}})})}),e.forEach(e=>{e.addEventListener("click",e=>{if("DIV"===e.target.tagName||"P"===e.target.tagName||"H4"===e.target.tagName||"SPAN"===e.target.tagName){let n,a,o,l;l=l=e.target.dataset.id,"P"!==e.target.tagName&&"H4"!==e.target.tagName||(l=e.target.parentElement.dataset.id),"SPAN"===e.target.tagName&&(l=e.target.parentElement.parentElement.dataset.id),n=document.querySelector(`div[data-id="${l}"] h4`).textContent,a=parseInt(document.querySelector(`div[data-id="${l}"] #precio`).textContent),o=parseInt(document.querySelector(`div[data-id="${l}"] #duracion`).textContent),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea editar el servcio?",html:`<form class="formulario" action="/admin/servicios/editar" method="POST">\n                                <input type="hidden" name="id" value="${l}" >\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="nombre">Nombre:</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="text" placeholder="Nombre del servicio" id="nombre" name="nombre" value="${n}" required>\n                                        <label data-num="25" class="count-charts" for="">25</label>\n                                    </div>\n                                </div>\n                                \n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="precio">Precio:</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="number" placeholder="Precio del servicio" id="precio" name="precio" value="${a}" requiered>\n                                        <label for="">$</label>\n                                    </div>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="duracion">Duracion:</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="number" min="10" max="120" placeholder="Duracion en minutos del servicio" id="duracion" name="duracion" value="${o}" disabled>\n                                        <label for="">min</label>\n                                    </div>\n                                </div>\n                                <input class="formulario__submit--servicio" type="submit" value="Actualizar">\n                           </form>`,showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Cancelar"}),t()}})}),t(),document.querySelector(".alerta")&&setTimeout(()=>{document.querySelector(".alerta").remove()},5e3)}();
//# sourceMappingURL=bundle.js.map
