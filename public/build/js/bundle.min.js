function scrolnav(){document.querySelectorAll(".dashboard__menu a").forEach((function(e){if(e.classList.contains("dashboard__enlace--actual")){document.querySelector("."+e.firstElementChild.nextElementSibling.textContent).scrollIntoView({behavior:"smooth"})}}))}!function(){if(document.querySelector(".barraprogreso")){const e=document.querySelectorAll("#negocio"),t=document.querySelector(".barraprogreso__label"),o=document.querySelector(".barraprogreso__barra");let n=0;e.forEach(e=>{e.value&&n++}),o.classList.add("animation"),t.textContent=(100*n/11).toFixed(1)+"%";document.querySelector(".animation").style.width=t.textContent}if(document.querySelector(".cambiopaginas")){const e=document.querySelectorAll(".cambiopaginas span");e[0].classList.add("resaltar"),document.querySelector(".perfil")?document.querySelector(".pagina3").classList.add("mostrarseccion"):document.querySelector(".pagina1").classList.add("mostrarseccion"),e.forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("resaltar")||(e.forEach(e=>e.classList.remove("resaltar")),t.target.classList.add("resaltar"));document.querySelectorAll(".paginas").forEach(e=>e.classList.remove("mostrarseccion")),document.querySelector("."+t.target.id).classList.add("mostrarseccion")})})}document.querySelectorAll(".dia input[type=checkbox]").forEach(e=>{e.addEventListener("change",(function(e){if(this.checked)for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!1;else for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!0}))});document.querySelectorAll("#entrada").forEach(e=>{e.addEventListener("change",e=>{!function e(t,o){for(;t.firstChild;)t.removeChild(t.firstChild);let n=o.target.value.split(":"),a=parseInt(n[0]+n[1]);for(let e=0;a<2300;e++){let e=document.createElement("OPTION");a+=30,a%100==60&&(a+=40),e.value=a,n[0]=parseInt(a/100),n[1]=a%100,0===n[1]&&(n[1]="00"),e.textContent=n[0]+":"+n[1],t.appendChild(e)}t.addEventListener("change",t=>{let o=t.target.nextElementSibling;o&&e(o,t)})}(e.target.nextElementSibling,e)})})}(),function(){if(document.querySelector("#dashboardcitas")){const c=document.querySelector("#filtros-personalizado"),s=document.querySelector("#selectprofesional"),d=document.querySelector("#fecha"),u=document.querySelector("#crearcita"),m=document.querySelector("#crearcitanoreg"),p=document.querySelectorAll(".programar");c&&c.addEventListener("click",()=>{let e=s.options[s.options.selectedIndex].value;e&&Swal.fire({customClass:{},title:"Consulta el profesional por fecha:",html:`<form class="formulario" action="/admin/citas/consultaxprofesxfecha?pagina=1" method="POST">    \n                                    <div class="formulario__campo">\n                                        <input class="formulario__input" id="fecha" type="date" name="fecha" value=" " required>\n                                    </div>\n                                    <input type="hidden" name="profesional" value="${e}">\n                                    <input class="btnsmall" type="submit" value="Consultar">\n                            </form>`,showCancelButton:!1,showConfirmButton:!1})}),d.addEventListener("input",e=>{window.location="/admin/citas/filtroxfecha?pagina=1&fecha="+e.target.value});let f,v,h,_,g,b,y,S,E,q=0,C=[],w=[];function e(e,t,o,n,a){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:e,html:`<form class="formulario modalform" action="${o}" method="POST">\n                            <input type="hidden" id="id_empserv" name="id_empserv" value="" >\n                            <input type="hidden" id="hora_fin" name="hora_fin" value="" >\n\n                            <div class="">\n                                ${n}\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="servicios">Seleccione Servicio: </label>\n                                    <select class="formulario__select" name="idservicio" id="servicios" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="descripcion">Descripcion: </label>\n                                    <textarea class="formulario__textarea" id="descripcion" name="descripcion" rows="4"></textarea>\n                                </div>\n                                ${a}\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="professionals">Seleccione Profesional: </label>\n                                    <select class="formulario__select" name="nameprofesional" id="professionals" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="date">Seleccionar Fecha:</label>\n                                    <input class="formulario__input" id="date" name="fecha_fin" type="date" disabled required>\n                                </div>\n                            </div>\n                            \n                            <div class="cliente__campohoras" id="horas">\n\n                            </div>\n                            <input class="clientes-btn" type="submit" value="${t}">\n                       </form>`,showCancelButton:!0,showConfirmButton:!1})}function t(){const e=document.querySelector("#servicios");v.forEach(t=>{const o=document.createElement("OPTION");o.value=t.id,o.textContent=t.nombre,e.appendChild(o)}),e.addEventListener("change",e=>o(e.target.value))}function o(e){!function(e){const t=document.querySelector(".campovalor");v.forEach(o=>{o.id===e&&(null===o.precio?(t.style="display: flex",document.querySelector("#valorpersonalizado").required=!0):(t.style="display: none",document.querySelector("#valorpersonalizado").required=!1))})}(e);const t=document.querySelector("#professionals"),o=h.filter(t=>t.idservicio===e);r(t),document.querySelector("#date").disabled=!0,r(document.querySelector("#horas"));const n=document.createElement("OPTION");n.value="",n.textContent=" -Selecionar- ",n.selected=!0,n.disabled=!0,t.appendChild(n),o.forEach(e=>{const o=document.createElement("OPTION");o.value=e.idempleado,o.textContent=e.nombre,o.dataset.id=e.id,t.appendChild(o)}),t.addEventListener("change",e=>{document.querySelector("#date").disabled=!1,document.querySelector("#date").value="",function(){const e=document.querySelector("#date"),t=new Date,o=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();let l=`${o}-${n}-${a}`;n<10&&(l=`${o}-0${n}-${a}`);n<10&&a<10&&(l=`${o}-0${n}-0${a}`);n>=10&&a<10&&(l=`${o}-${n}-0${a}`);e.min=l}(),r(document.querySelector("#horas"))})}function n(){document.querySelector("#date").addEventListener("input",e=>{r(document.querySelector("#horas"));const t=new Date(e.target.value);a(e.target.value,t.getUTCDay())})}function a(e,t){const o=document.querySelector("#professionals"),n=o.options[o.options.selectedIndex].value;document.querySelector("#id_empserv").value=o.options[o.options.selectedIndex].dataset.id,S=g["empleado_"+n],y=_.filter(e=>n===e.empleado_id),E=b.filter(t=>t.idempleado===n&&t.fecha_fin===e&&"Pendiente"===t.estado),console.log(b);if(y.some(t=>t.fecha===e))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const e=S.filter(e=>e.id_dia==(0===t?7:t));e.length?function(e){let t=[],o=[];t=[...t,e.inicioturno,e.inidescanso],o=[...o,e.findescanso,e.finturno],t=t.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),o=o.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),w=E.map(e=>e.hora_fin);for(let e=0;e<t.length-1;e++)l(t[e],t[e+1]);for(let e=0;e<o.length-1;e++)l(o[e],o[e+1]);console.log(C),function(){const e=document.querySelector("#horas");C.forEach(t=>{const o=document.createElement("DIV");o.classList.add("cliente__hora");const n=document.createElement("P");n.textContent=t,n.dataset.hora=t,n.onclick=i,n.classList.add("texthora"),o.appendChild(n),e.appendChild(o)})}()}(e[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}function l(e,t){const o=new Date("01/01/2000 "+e),n=new Date("01/01/2000 "+t);for(n.setTime(n.getTime()-6e4*Math.floor(q));o<=n;){const e=o.getHours().toString().padStart(2,"0"),t=o.getMinutes().toString().padStart(2,"0");w.includes(`${e}:${t}`)||(C=[...C,`${e}:${t}`]),o.setTime(o.getTime()+6e4*q)}}function i(e){const t=document.querySelector(".horaselect");t&&t.classList.remove("horaselect"),e.target.parentElement.classList.add("horaselect"),document.querySelector("#hora_fin").value=e.target.textContent}function r(e){for(C=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);q=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/allclientes",t=await fetch(e);f=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getservices",t=await fetch(e);v=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);h=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);_=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);g=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);b=await t.json()}catch(e){console.log(e)}})(),u.addEventListener("click",o=>{o.preventDefault();e("Crear Cita","Crear","/admin/citas/crear?pagina=1",'<div class="formulario__campo">\n                                <label class="formulario__label" for="usuario">Seleccione Usuario: </label>\n                                <select class="formulario__select" name="id_usuario" id="usuario" required>\n                                    <option value="" disabled selected> -Selecionar- </option>\n                                </select>\n                            </div>','<div class="formulario__campo campovalor" style="display: none;">\n                                    <label class="formulario__label" for="valorpersonalizado">Valor personalizado: </label>\n                                    <input class="formulario__input" type="number" id="valorpersonalizado" name="valorpersonalizado">\n                                </div>'),function(){const e=document.querySelector("#usuario");f.forEach(t=>{if(2!=t.id){const o=document.createElement("OPTION");o.value=t.id,o.textContent=t.nombre+" "+t.apellido,e.appendChild(o)}})}(),t(),n()}),p.forEach(l=>{l.addEventListener("click",l=>{const i=l.target.parentElement.parentElement.previousElementSibling.textContent;"Pendiente"!==i&&"Out"!==i||(e("Reprogramar Cita A:","Enviar","/admin/citas?pagina=1",'<span class="namecliente"></span><span id="horacita"></span>\n                                <input type="hidden" id="id" name="id" value="" >','<div class="formulario__campo campovalor">\n                                        <label class="formulario__label" for="valorpersonalizado">Valor personalizado: </label>\n                                        <input class="formulario__input" type="number" id="valorpersonalizado" name="valorpersonalizado">\n                                    </div>'),function(e){t();const l=e.parentElement.parentElement.parentElement,i=l.children[0].textContent,r=l.children[0].dataset.descripcion,c=l.children[1].textContent,s=l.children[2].textContent,d=l.children[3].textContent,u=l.children[4].textContent,m=l.children[5].textContent,p=document.querySelector(".namecliente"),f=document.querySelector("#servicios"),v=document.querySelector("#professionals"),h=document.querySelector("#date");p.textContent=c+" - ",document.querySelector("#horacita").textContent=m,document.querySelector("#id").value=i,document.querySelector("#hora_fin").value=m;for(let e=0;e<f.options.length;e++)f.options[e].textContent===s&&(f.options[e].selected=!0);document.querySelector("#descripcion").value=r;o(f.options[f.options.selectedIndex].value),document.querySelector("#valorpersonalizado").value=l.children[2].dataset.precio;for(let e=0;e<v.options.length;e++)v.options[e].textContent===d&&(v.options[e].selected=!0,document.querySelector("#id_empserv").value=v.options[e].dataset.id);h.value=u,n();const _=new Date(u);a(u,_.getUTCDay())}(l.target))})}),m.addEventListener("click",o=>{o.preventDefault();e("Cita Para Cliente No Registrado","Crear","/admin/citas/crear?pagina=1",'<div class="formulario__campo">\n                                <label class="formulario__label" for="nombrecliente">Nombre del cliente: </label>\n                                <input class="formulario__input" id="nombrecliente" name="nombrecliente" type="text" required>\n                            </div>\n                            <input type="hidden" name="id_usuario" value="2" >\n                            ','<div class="formulario__campo campovalor" style="display: none;">\n                                    <label class="formulario__label" for="valorpersonalizado">Valor personalizado: </label>\n                                    <input class="formulario__input" type="number" id="valorpersonalizado" name="valorpersonalizado">\n                                </div>'),t(),n()})}}(),function(){if(document.querySelector(".clientes")){const o=document.querySelector("#crearcliente"),n=document.querySelectorAll("#editar"),a=document.querySelectorAll("#hab_desh");let l={titulo:"",url:"",submit:"",nombre:"",apellido:"",movil:"",email:""};function e(e,t){let{titulo:o,url:n,submit:a,nombre:l,apellido:i,movil:r,email:c,password:s}=e;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:o,html:`<form class="formulario modalform" action="${n}" method="POST">\n                            <input type="hidden" name="id" value="${t}" >\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nombre">Nombre:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nombre del cliente" id="nombre" name="nombre" value="${l}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="apellido">Apellido:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Apellido del cliente" id="apellido" name="apellido" value="${i}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="movil">Movil</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="number" placeholder="Movil del cliente" id="movil" name="movil" value="${r}" required>\n                                    <label data-num="10" class="count-charts" for="">10</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="email">Email</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="email" placeholder="Email del cliente" id="email" name="email" value="${c}" required>\n                                    <label data-num="40" class="count-charts" for="">40</label>\n                                </div>\n                            </div>\n                            ${s}\n                            <input class="clientes-btn" type="submit" value="${a}">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1})}function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let o=t.target.value.slice(0,e.dataset.num);t.target.value=o,e.textContent=0}})})}o.addEventListener("click",()=>{l.titulo="Crear Cliente Nuevo",l.url="/admin/clientes/crear",l.submit="Crear Cliente",l.nombre="",l.apellido="",l.movil="",l.email="",l.password='<div class="formulario__campo">\n                                    <label class="formulario__label" for="password">Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Password del cliente" id="password" name="password" maxlength="4" oninput="this.value = this.value.replace(/[^0-9]/g, \'\');" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="password2">Repetir Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Repetir Password" id="password2" name="password2" maxlength="4" oninput="this.value = this.value.replace(/[^0-9]/g, \'\');" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>',e(l,0),t()}),n.forEach(o=>{o.addEventListener("click",o=>{l.titulo="Actualizar Cliente",l.url="/admin/clientes/actualizar",l.submit="Actualizar";const n=o.target.parentElement.parentElement.parentElement;l.nombre=n.children[1].textContent,l.apellido=n.children[2].textContent,l.movil=n.children[3].textContent,l.email=n.children[4].textContent,l.password="",e(l,o.target.parentElement.dataset.id),t()})}),a.forEach(e=>{e.addEventListener("click",e=>{let t="Desea bloquear el cliente?";e.target.classList.contains("habilitar")&&(t="Desea habilitar el cliente?");const o=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:t,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/clientes/hab_desh?id="+o)})})})}}(),function(){if(document.querySelector(".pagina5")){let t=[];const o=document.querySelectorAll('.mediospago__mediopago input[type="checkbox"]'),n=document.querySelector("#btnmediopago");(async()=>{try{const e="/admin/api/getmediospago",n=await fetch(e);!function(e){o.forEach(o=>{const n=e.find(e=>e.id==o.value);"1"===n.estado&&(o.checked=!0,t=[...t,n.id])})}(await n.json())}catch(e){console.log(e)}})(),o.forEach(e=>{e.addEventListener("change",e=>{t=e.target.checked?[...t,e.target.value]:t.filter(t=>t!=e.target.value)})}),n.addEventListener("click",()=>{(async()=>{const o=new FormData;o.append("ids",t);try{const t="/admin/api/setmediospago",n=await fetch(t,{method:"POST",body:o});await n.json()?e("Medios de pago actualizados","alerta__exito",document.querySelector(".mediospago")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".mediospago"))}catch(e){console.log(e)}})()});const a=document.querySelector("#formhabilitarempleado"),l=document.querySelector("#dardealtaselectempleado");l.addEventListener("change",e=>{const t=e.target.options[e.target.options.selectedIndex].dataset.restriccion;document.querySelector('.creacioncuentas__habilitaremp input[name="admin"]:checked')&&(document.querySelector('.creacioncuentas__habilitaremp input[name="admin"]:checked').checked=!1),2==t&&(document.querySelector(".creacioncuentas__habilitaremp #roladmin").checked=!0),1==t&&(document.querySelector(".creacioncuentas__habilitaremp #rolempleado").checked=!0)}),a.addEventListener("submit",t=>{t.preventDefault();const o=document.querySelector('input[name="admin"]:checked').value,n=l.options[l.options.selectedIndex].value;(async()=>{const t=new FormData;t.append("idempleado",n),t.append("tiporol",o);try{const n="/admin/api/habilitarempleado",a=await fetch(n,{method:"POST",body:t});await a.json()?(l.options[l.options.selectedIndex].dataset.restriccion=o,e("Empleado dado de alta en sistema administrativo","alerta__exito",document.querySelector(".creacioncuentas__habilitaremp"))):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".creacioncuentas__habilitaremp"))}catch(e){console.log(e)}})()});const i=document.querySelector("#formsetearpass"),r=document.querySelector("#selectsetearpass");i.addEventListener("submit",t=>{t.preventDefault();const o=r.options[r.options.selectedIndex].value;(async()=>{const t=new FormData;t.append("idempleado",o);try{const o="/admin/api/setearpass",n=await fetch(o,{method:"POST",body:t}),a=await n.json();console.log(a),a?e("Password reiniciado por defecto","alerta__exito",document.querySelector(".creacioncuentas__setearpass")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".creacioncuentas__setearpass"))}catch(e){console.log(e)}})()});document.querySelector("#formcolores").addEventListener("submit",t=>{t.preventDefault();const o=document.querySelector(".coloresapp #principal").value,n=document.querySelector(".coloresapp #secundario").value;(async()=>{const t=new FormData;t.append("colorprincipal",o),t.append("colorsecundario",n);try{const o="/admin/api/coloresapp",n=await fetch(o,{method:"POST",body:t});await n.json()?e("Colores establecidos exitosamente","alerta__exito",document.querySelector(".coloresapp")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".coloresapp"))}catch(e){console.log(e)}})()}),(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);!function(e){const t=document.querySelector("#selecttime");for(let o=1;o<=t.options.length;o++)if(t.options[o].value==e){t.options[o].selected=!0;break}}(await t.json())}catch(e){console.log(e)}})();function e(e,t,o){const n=document.createElement("P");n.textContent=e,n.classList.add("alerta",t),o.insertBefore(n,o.querySelector(".configuracion__heading")),setTimeout(()=>{document.querySelector(".alerta").remove()},5e3)}document.querySelector("#formtimeserv").addEventListener("submit",t=>{t.preventDefault();const o=document.querySelector("#selecttime"),n=o.options[o.options.selectedIndex].value,a=new FormData;a.append("timeservice",n),(async()=>{try{const t="/admin/api/tiemposervicio",o=await fetch(t,{method:"POST",body:a}),n=await o.json();console.log(n),n?e("Tiempo del servicio establecido","alerta__exito",document.querySelector(".tiemposervicio")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".tiemposervicio"))}catch(e){console.log(e)}})()})}}(),function(){if(document.querySelector(".creardescuento")){const t=document.querySelector("#categoria"),o=document.querySelector("#product_serv"),n=document.querySelector("#tipo"),a=document.querySelector("#dcto1"),l=document.querySelector("#dcto2"),i=document.querySelector("#dcto2Valor"),r=document.querySelector("#fecha_ini");let c,s;function e(e){"porcentaje"==n.options[n.options.selectedIndex].value&&(e>100&&(a.value=100),e<0&&(a.value=0),l.value=Math.round(s*a.value/100)),"valor"==n.options[n.options.selectedIndex].value&&(e>parseInt(s)&&(a.value=s),e<0&&(a.value=0),l.value=Math.round(100*a.value/s))}!function(){const e=new Date;e.setDate(e.getDate());const t=e.getFullYear(),o=e.getMonth()+1,n=e.getDate();let a=`${t}-${o}-${n}`;o<10&&n<10&&(a=`${t}-0${o}-0${n}`);o<10&&n>=10&&(a=`${t}-0${o}-${n}`);o>=10&&n<10&&(a=`${t}-${o}-0${n}`);r.min=a}(),(async()=>{try{const e="/admin/api/getservices",t=await fetch(e);c=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",e=>{!function(e){horasdisponibles=[];for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}(o);const t=document.createElement("OPTION");t.value="",t.textContent="Seleccione Producto/servicio",o.appendChild(t),n.disabled=!0,a.disabled=!0,"servicios"==e.target.value&&c.forEach(e=>{if(e.precio){const t=document.createElement("OPTION");t.value=e.id,t.textContent=e.nombre,o.appendChild(t)}}),e.target.value}),o.addEventListener("change",t=>{const o=c.filter(e=>e.id==t.target.value);s=o[0].precio,document.querySelector("#valorservicio").textContent="$ "+s,n.disabled=!1,e(a.value)}),n.addEventListener("change",t=>{"porcentaje"==t.target.value&&(a.min=0,a.max=100,i.textContent="Valor"),"valor"==t.target.value&&(a.min=0,a.max=s,i.textContent="Valor (%)"),a.disabled=!1,e(a.value)}),a.addEventListener("input",t=>{e(t.target.value)}),r.addEventListener("change",e=>{const t=document.querySelector("#fecha_fin");t.disabled=!1;const o=new Date(e.target.value);o.setDate(o.getDate()+2);const n=o.getFullYear(),a=o.getMonth()+1,l=o.getDate();let i=`${n}-${a}-${l}`;a<10&&l<10&&(i=`${n}-0${a}-0${l}`),a<10&&l>=10&&(i=`${n}-0${a}-${l}`),a>=10&&l<10&&(i=`${n}-${a}-0${l}`),t.min=i})}}(),document.addEventListener("DOMContentLoaded",(function(){scrolnav()})),function(){if(document.querySelector("#dash-cliente")){const n=document.querySelector("#servicio"),a=document.querySelector("#profesional"),l=document.querySelector("#date"),i=document.querySelectorAll("#cancelado"),r=document.getElementById("miDialogo");let c;function e(t){console.log(t.target),t.target!==r&&"cerrardialog"!==t.target.id||(r.close(),document.removeEventListener("click",e))}function t(e){const t=c.filter(t=>t.idservicio===e);o(a),o(document.querySelector("#horas"));const n=document.createElement("OPTION");n.value="",n.textContent=" -Selecionar- ",n.selected=!0,n.disabled=!0,a.appendChild(n),t.forEach(e=>{const t=document.createElement("OPTION");t.value=e.idempleado,t.textContent=e.nombre,t.dataset.id=e.id,a.appendChild(t)})}function o(e){for(horasdisponibles=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}l.disabled=!0,(async()=>{try{const e="/admin/api/getemployee_services",o=await fetch(e);c=await o.json(),function(){const e=new URLSearchParams(window.location.search),o=e.get("id"),a=e.get("valordcto");if(o){n.classList.add("servicioselected");for(let e=1;e<=n.options.length;e++)if(n.options[e].value==o){n.options[e].selected=!0;let t=n.options[e].textContent.split(" - ");t=t[0]+" - "+a,n.options[e].textContent=t;break}t(o)}}()}catch(e){console.log(e)}})(),function(){const e=document.querySelector("#date"),t=new Date;t.setDate(t.getDate()+1);const o=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();let l=`${o}-${n}-${a}`;n<10&&a<10&&(l=`${o}-0${n}-0${a}`);n<10&&a>=10&&(l=`${o}-0${n}-${a}`);n>=10&&a<10&&(l=`${o}-${n}-0${a}`);e.min=l}(),n.addEventListener("change",o=>{l.disabled=!0,n.classList.remove("servicioselected"),o.target.options[o.target.options.selectedIndex].textContent.includes("$")||(r.showModal(),document.addEventListener("click",e)),t(o.target.value)}),i.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement;!function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES SOLICITAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(o=>{o.isConfirmed&&(async()=>{try{const o="/admin/api/cancelarcita?id="+e,n=await fetch(o);await n.json()?(t.remove(),Swal.fire("Cita Cancelada","","success")):Swal.fire("No se pudo cancelar intentalo nuevamente","","error")}catch(e){console.log(e)}})()})}(e.target.parentElement.dataset.id,t)})})}}(),function(){if(document.querySelector("#dash-cliente")){const a=document.querySelector("#telcliente").textContent;let l=0,i=[],r=[];const c=document.querySelector("#horas");function e(e,t){const o=new Date("01/01/2000 "+e),n=new Date("01/01/2000 "+t);for(n.setTime(n.getTime()-6e4*Math.floor(l));o<=n;){const e=o.getHours().toString().padStart(2,"0"),t=o.getMinutes().toString().padStart(2,"0");r.includes(`${e}:${t}`)||(i=[...i,`${e}:${t}`]),o.setTime(o.getTime()+6e4*l)}}const s=document.querySelector("#profesional"),d=document.querySelector("#date");let u,m,p,f,v,h;(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);l=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);u=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);m=await t.json()}catch(e){console.log(e)}})();const _=async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);p=await t.json()}catch(e){console.log(e)}};function t(t,n){const a=s.options[s.options.selectedIndex].value;h=p.filter(e=>e.idempleado===a&&e.fecha_fin===t&&"Pendiente"===e.estado);if(f.some(e=>e.fecha===t))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const t=v.filter(e=>e.id_dia==(0===n?7:n));t.length?function(t){let n=[],a=[];n=[...n,t.inicioturno,t.inidescanso],a=[...a,t.findescanso,t.finturno],n=n.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),a=a.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),r=h.map(e=>e.hora_fin);for(let t=0;t<n.length-1;t++)e(n[t],n[t+1]);for(let t=0;t<a.length-1;t++)e(a[t],a[t+1]);console.log(i),i.forEach(e=>{const t=document.createElement("DIV");t.classList.add("cliente__hora");const n=document.createElement("P");n.textContent=e,n.dataset.hora=e,n.onclick=o,n.classList.add("texthora"),t.appendChild(n),c.appendChild(t)})}(t[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}function o(e){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Reservar La Cita?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const t=new FormData,o=s.options[s.options.selectedIndex],n=document.querySelector("#servicio").options[document.querySelector("#servicio").options.selectedIndex].value,l=document.querySelector("#descripcion").value,i=new Date;t.append("telcliente",a),t.append("id_empserv",o.dataset.id),t.append("fecha_inicio",i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()),t.append("fecha_fin",d.value),t.append("hora",i.toLocaleTimeString([],{hour12:!1})),t.append("hora_fin",e),t.append("idservicio",n),t.append("nameprofesional",o.value),t.append("descripcion",l);try{const e="/admin/api/enviarcita",o=await fetch(e,{method:"POST",body:t});return!!await o.json()}catch(e){console.log(e)}}(e.target.dataset.hora).then(e=>{e?(Swal.fire("Cita Programada","","success"),setTimeout(()=>{window.location.reload()},1500)):Swal.fire("No fue posible agendar cita, Intentalo de nuevo","","error")})})}function n(e){for(i=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}_(),setInterval(()=>{if(_(),""==!d.value&&document.querySelector(".cliente__hora")){const e=new Date(d.value);n(c),t(d.value,e.getUTCDay())}},3100),s.addEventListener("change",e=>{n(c),d.disabled=!1,d.value="",v=m["empleado_"+e.target.value],f=u.filter(t=>e.target.value===t.empleado_id)}),d.addEventListener("input",e=>{n(c);const o=new Date(e.target.value);t(e.target.value,o.getUTCDay())})}}(),function(){if(document.querySelector(".descuentos")){const t=document.querySelectorAll(".programar"),o=document.querySelectorAll(".cancelado"),n=document.querySelectorAll(".sendmsj");let a={};function e(e,t){const o=document.querySelector("#dcto1"),n=document.querySelector("#dcto2"),l=document.querySelector("#dcto2Valor");"porcentaje"==t.options[t.options.selectedIndex].value&&(o.min=0,o.max=100,l.textContent="Valor",e>100&&(o.value=100),e<0&&(o.value=0),n.value=Math.round(a.valorservicio*o.value/100)),"valor"==t.options[t.options.selectedIndex].value&&(o.min=0,o.max=a.valorservicio,l.textContent="Valor (%)",e>parseInt(a.valorservicio)&&(o.value=a.valorservicio),e<0&&(o.value=0),n.value=Math.round(100*o.value/a.valorservicio))}t.forEach(t=>{t.addEventListener("click",t=>{const o=t.target.parentElement.parentElement.parentElement;a.id=t.target.parentElement.dataset.id,a.nombreproducto=o.children[2].textContent,a.valorservicio=o.children[3].textContent.slice(1),a.dcto=o.children[4].textContent,a.valorfinal=o.children[5].textContent,a.fecha_fin=o.children[7].textContent,function(t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Actualizar Oferta",html:`<form class="formulario modalform" action="/admin/fidelizacion/editar_dctoxproduct" method="POST">\n                            <input type="hidden" name="id" value="${t.id}" >\n                            \n                            <span class="nameuser">${t.nombreproducto}</span>\n                            <span class="precio">Valor: ${t.valorservicio}</span>\n                            <span class="nameuser">Dcto: ${t.dcto}</span>\n                            <span class="nameuser">Valor Final: ${t.valorfinal}</span>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="tipo">Tipo De Dcto: </label>\n                                <select class="formulario__select" name="tipo" id="tipo" required>\n                                    <option value="" disabled selected> Seleccionar tipo de dcto</option>\n                                    <option value="porcentaje">Porcentaje</option>\n                                    <option value="valor">Valor</option>\n                                </select>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="dcto1">Descuento</label>\n                                <input class="formulario__input" id="dcto1" type="number" min="" max="" name="dcto1" value="" disabled required>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="dcto2" id="dcto2Valor">Valor</label>\n                                <input class="formulario__input" id="dcto2" type="number" min="" max="" name="dcto2" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="fecha_fin">Fecha De Finalizacion</label>\n                                <input class="formulario__input" type="date" id="fecha_fin" name="fecha_fin" value="${t.fecha_fin}" requiered>\n                            </div>\n                            \n                            <input class="clientes-btn" type="submit" value="Actualizar">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1}),function(){const t=document.querySelector("#dcto1"),o=document.querySelector("#tipo");o.addEventListener("change",n=>{t.disabled=!1,e(t.value,o)}),t.addEventListener("input",t=>{e(t.target.value,o)})}()}(a)})}),o.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar la oferta del cliente?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/fidelizacion?id="+t)})})}),n.forEach(e=>{e.addEventListener("click",e=>{e.target.parentElement.dataset.id;Swal.fire({icon:"error",title:"Oops...",text:"clase y metodo de mensaje no configurado!",footer:"Innovatech quindio"})})})}}(),function(){if(document.querySelector("#dashboardcitas")){document.querySelectorAll(".detallepagocita").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,o=t.children[6].textContent,n=t.children[0].textContent;"Finalizada"===o&&(async()=>{try{const e="/admin/api/detallepagoxcita?id="+n,o=await fetch(e);!function(e,t){console.log(e);const{id:o,idcita:n,recibido:a,devolucion:l,fecha_pago:i,hora_pago:r,dcto:c,valordcto:s,valorpromo:d,valor_servicio:u,total:m}=e;console.log(a),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Detalle Del Pago",html:`\n                    <h4 class="orden">App Barber</h4>\n                    <div class="recibo">\n                        <p class="recibo__titulo">NÂº De Pago: ${o}</p>\n                        <p class="recibo__titulo">Orden Cita: ${n}</p>\n                        <div class="recibo__datos">\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Cliente:</p>\n                                <p class="recibo__texto">${t.children[1].textContent}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">profesional:</p>\n                                <p class="recibo__texto">${t.children[3].textContent}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">servicio:</p>\n                                <p class="recibo__texto">${t.children[2].textContent}</p>\n                            </div>\n                        </div>\n                        <div class="recibo__datos">\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Fecha:</p>\n                                <p class="recibo__texto">${i}, ${r}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Valor Servicio:</p>\n                                <p class="recibo__texto">$${u}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Recibido:</p>\n                                <p class="recibo__texto">$${a}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Devolucion:</p>\n                                <p class="recibo__texto">$${l}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Promo Aplicado:</p>\n                                <p class="recibo__texto">$${d}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Dcto Manual:</p>\n                                <p class="recibo__texto">$${s}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Total:</p>\n                                <p class="recibo__texto">$${m}</p>\n                            </div>\n                        </div>\n                    </div>`,width:"auto",showCancelButton:!0,confirmButtonText:"Anular Pago"}).then(e=>{e.isConfirmed&&Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea anular el pago?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&async function(e){try{const t="/admin/api/anularpagoxcita?id="+e,o=await fetch(t);return await o.json()}catch(e){console.log(e)}}(o).then(e=>{e?(!function(e){e.children[6].textContent="Pendiente",e.classList.remove("tr-resaltar")}(t),Swal.fire("Anulado!","","success")):Swal.fire("No se permite de dias anteriores!","","error")})})})}(await o.json(),t)}catch(e){console.log(e)}})()})})}}(),function(){if(document.querySelector(".formulario__fieldset--servicios")){const n=document.querySelector(".pagina1 .formulario__campostags"),a=document.querySelector(".pagina4 .formulario__campostags"),l=document.querySelector(".pagina1 .formulario__tagselect"),i=document.querySelector(".pagina4 .formulario__tagselect"),r=document.querySelector('.pagina1 [name="servicios"]'),c=document.querySelector('.pagina4 [name="servicios"]'),s=document.querySelector("#selectemployee"),d=document.querySelector("#eliminaremployee");let u,m=[],p=[],f=[];l.classList.add("selectskills1");for(let e=1;e<i.options.length;e++){let t={id:i.options[e].value,nombre:i.options[e].textContent};m=[...m,t]}function e(e,n,a){const l=document.createElement("DIV");l.classList.add("formulario__tag");const i=document.createElement("SPAN");i.textContent=e,i.id=n;const r=document.createElement("I");return r.classList.add("fa-solid"),r.classList.add("fa-rectangle-xmark"),r.onclick=function(e){!function(e,n){let a=e.target.previousElementSibling;o(n,{id:a.id,nombre:a.textContent}),e.target.parentElement.remove(),n.classList.contains("selectskills1")?p=p.filter(e=>e!=a.id):f=f.filter(e=>e!=a.id);t()}(e,a)},l.appendChild(i),l.appendChild(r),l}function t(){r.value=p.toString(),c.value=f.toString()}function o(e,t){const o=document.createElement("OPTION");o.value=t.id,o.textContent=t.nombre,e.appendChild(o)}(async()=>{try{const e="/admin/api/getAllemployee",t=await fetch(e);u=await t.json()}catch(e){console.log(e)}})(),l.addEventListener("change",o=>{p=[...p,o.target.options[l.options.selectedIndex].value];let a=e(o.target.options[l.options.selectedIndex].textContent,o.target.options[l.options.selectedIndex].value,l);n.appendChild(a),l.options[l.options.selectedIndex].remove(),l.options[0].selected=!0,t()}),s.addEventListener("change",n=>{let l;document.querySelectorAll(".pagina4 .formulario__tag").forEach(e=>{e.remove()}),d.href="/admin/adminconfig/eliminaremployee?id="+n.target.value,l=u.filter(e=>e.id==n.target.value),function(n){const{servicios:l}=n[0];document.querySelector(".pagina4 #nombre").value=n[0].nombre,document.querySelector(".pagina4 #apellido").value=n[0].apellido,document.querySelector(".pagina4 #movil").value=n[0].movil,document.querySelector(".pagina4 #email").value=n[0].email,document.querySelector(".pagina4 #departamento").value=n[0].departamento,document.querySelector(".pagina4 #ciudad").value=n[0].ciudad,document.querySelector(".pagina4 #direccion").value=n[0].direccion,f=[],m.forEach(e=>{let t=1;for(;t<i.options.length&&e.id!=i.options[t].value;t++);t===i.options.length&&o(i,{id:e.id,nombre:e.nombre})}),l.forEach(t=>{f=[...f,t.id];let o=e(t.nombre,t.id,i);a.appendChild(o),i.querySelector(`option[value="${t.id}"`)&&i.querySelector(`option[value="${t.id}"`).remove()}),i.options[0].selected=!0,t()}(l)}),i.addEventListener("change",o=>{f=[...f,o.target.options[i.options.selectedIndex].value];let n=e(o.target.options[i.options.selectedIndex].textContent,o.target.options[i.options.selectedIndex].value,i);a.appendChild(n),i.options[i.options.selectedIndex].remove(),i.options[0].selected=!0,t()}),d.addEventListener("click",e=>{e.preventDefault(),e.target.href.includes("?id=")&&Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el empleado?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(window.location=e.target.href)})})}}(),function(){if(document.querySelector(".facturacion")){let t,o;(async()=>{try{const e="/admin/api/getservices",o=await fetch(e);t=await o.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);o=await t.json(),console.log(o)}catch(e){console.log(e)}})();document.querySelector("#fecha").addEventListener("input",e=>{window.location="/admin/facturacion/buscarxfecha?pagina=1&fecha="+e.target.value});document.querySelector("#pagar").addEventListener("click",()=>{Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Pago De Servicio",html:'<form class="formulario modalform" action="/admin/facturacion" method="POST">\n                            <input type="hidden" name="total" value="" >\n                            <input type="hidden" name="dcto" value="0">\n                            <input type="hidden" name="valordcto" value="0">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="servicios">Servicios:</label>\n                                <select class="formulario__select" name="idservicio" id="selectservice" required>\n                                    <option value="" disabled selected> Seleccionar Servicio</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="empleado">Empleado:</label>\n                                <select class="formulario__select" name="idempleado" id="selectemployee" required>\n                                    <option value="" disabled selected> Seleccionar Empleado </option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="valor_servicio">Total a pagar:</label>\n                                <input class="formulario__input" type="number" id="valor_servicio" name="valor_servicio" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="mediopago">Elegir Medio De Pago:</label>\n                                <select class="formulario__select" name="idmediospago" id="mediopago">\n                                    <option value="" disabled selected> Seleccionar medio pago</option>\n                                </select> \n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",e),function(){const e=document.querySelector("#selectservice");t.forEach(t=>{const o=document.createElement("OPTION");o.value=t.id,o.textContent=t.nombre,e.appendChild(o)}),e.addEventListener("change",e=>{!function(e){const t=document.querySelector("#selectemployee"),n=o.filter(t=>t.idservicio===e);!function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}(t);const a=document.createElement("OPTION");a.value="",a.textContent=" Seleccionar Empleado ",a.selected=!0,a.disabled=!0,t.appendChild(a),n.forEach(e=>{const o=document.createElement("OPTION");o.value=e.idempleado,o.textContent=e.nombre,o.dataset.id=e.id,t.appendChild(o)})}(e.target.value),function(e){const o=document.querySelector("#valor_servicio"),n=t.filter(t=>t.id==e.target.value);o.value=n[0].precio,n[0].precio||(document.querySelector("#valor_servicio").readOnly=!1),document.querySelector("#recibido").value="",document.querySelector("#devolucion").value=""}(e)})}(),n(),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let o=t.target.value.slice(0,e.dataset.num);t.target.value=o,e.textContent=0}})})});const n=async()=>{try{const e="/admin/api/getmediospago",t=await fetch(e);!function(e){const t=document.querySelector("#mediopago");e.forEach(e=>{if("1"===e.estado){const o=document.createElement("OPTION");o.value=e.id,o.textContent=e.mediopago,t.appendChild(o)}})}(await t.json())}catch(e){console.log(e)}};function e(){const e=document.querySelector("input[name=valordcto]"),t=parseInt(document.querySelector("#valor_servicio").value),o=document.querySelector("#devolucion"),n=parseInt(document.querySelector("#recibido").value);n>=t?(o.value=n-t,e.value=0):(o.value=0,e.value=t-n),document.querySelector("input[name=total]").value=n-parseInt(o.value)}}}(),function(){if(document.querySelector(".descpagina3")){const t=document.querySelector("#selectemployeedate"),o=document.querySelector(".viewdates");let n;async function e(e){console.log(e.target.id);try{const t="/admin/api/deletefechadesc?id="+e.target.id,o=await fetch(t);1==await o.json()&&document.querySelector(`i[id="${e.target.id}"]`).parentElement.remove()}catch(e){console.log(e)}}(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);n=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const a=n.filter(e=>e.empleado_id==t.target.value);!function(){for(;o.firstChild;)o.removeChild(o.firstChild)}(),function(t){t.forEach(t=>{const n=document.createElement("DIV");n.classList.add("viewdates__viewdate"),n.dataset.id=t.id;const a=document.createElement("P");a.classList.add("viewdates__fecha"),a.textContent=t.fecha;const l=document.createElement("I");l.classList.add("fa-solid","fa-rectangle-xmark"),l.id=t.id,l.onclick=e,n.appendChild(a),n.appendChild(l),o.appendChild(n)})}(a)})}}(),function(){if(document.querySelector("#dashboardcitas")){const o=document.querySelectorAll(".cancelado"),n=document.querySelectorAll(".finalizado");let a;o.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,o=t.children[0].textContent,n=t.children[6].textContent;"Pendiente"!==n&&"Out"!==n||function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES CREAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(o=>{o.isConfirmed&&(async()=>{try{const o="/admin/api/cancelarcita?id="+e,n=await fetch(o);await n.json()&&(t.textContent="Cancelado",Swal.fire("Cita Cancelada","","success"))}catch(e){console.log(e)}})()})}(o,t.children[6])})}),n.forEach(o=>{o.addEventListener("click",o=>{"Pendiente"===o.target.parentElement.parentElement.parentElement.children[6].textContent&&(Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Terminar Cita",html:'<form class="formulario modalform" action="/admin/citas/finalizar?pagina=1" method="POST">\n                            <input type="hidden" name="id" value="" >\n                            <input type="hidden" name="valor_servicio" value="" >\n                            <input type="hidden" name="idempleado" value="" >\n                            <input type="hidden" name="valordcto" value="0" >\n                            <input type="hidden" name="promodcto" value="0" >\n                            <input type="hidden" name="total" value="" >\n\n                            <p class="orden"></p>\n                            <span class="nameuser"></span>\n                            <span class="nameservice"></span>\n                            <span class="precio"></span>\n\n                            <div class="">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="valorpromodcto">Aplicar Promocion:</label>\n                                <select class="formulario__select" name="valorpromo" id="valorpromodcto">\n                                    <option value="" disabled selected> Seleccionar Dcto</option>\n                                    <option data-dcto="0" value="0"> Sin Descuento</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="inputcostoservice">Valor del servicio: </label>\n                                <input class="formulario__input" type="number" id="inputcostoservice" name="inputcostoservice" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="mediopago">Elegir Medio De Pago:</label>\n                                <select class="formulario__select" name="idmediospago" id="mediopago">\n                                    <option value="" disabled selected> Seleccionar medio pago</option>\n                                </select> \n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",t),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let o=t.target.value.slice(0,e.dataset.num);t.target.value=o,e.textContent=0}})}),l(),function(o){const n=o.target.parentElement.dataset.promodcto||0,l=o.target.parentElement.dataset.promodctovalor||0,i=o.target.parentElement.parentElement.parentElement,r=i.children[0].textContent,c=i.children[1].textContent,s=i.children[2].textContent;a=i.children[2].dataset.precio,a||(document.querySelector("#inputcostoservice").readOnly=!1);document.querySelector("input[name=id]").value=r,document.querySelector("input[name=valor_servicio]").value=a,document.querySelector("input[name=idempleado]").value=i.children[3].dataset.idempleado,document.querySelector(".orden").textContent="Orden: "+r,document.querySelector(".nameuser").textContent=c,document.querySelector(".nameservice").textContent=s,document.querySelector(".precio").textContent="Precio: $"+a;const d=document.querySelector("#valorpromodcto");if(parseInt(n)||parseInt(l)){const e=document.createElement("option");e.textContent=n+"% - $"+l,e.value=l,e.dataset.dcto=n,d.appendChild(e)}d.addEventListener("change",e);const u=document.querySelector("#inputcostoservice");u.value=a,u.addEventListener("input",t)}(o))})});const l=async()=>{try{const e="/admin/api/getmediospago",t=await fetch(e);!function(e){const t=document.querySelector("#mediopago");e.forEach(e=>{if("1"===e.estado){const o=document.createElement("OPTION");o.value=e.id,o.textContent=e.mediopago,t.appendChild(o)}})}(await t.json())}catch(e){console.log(e)}};function e(e){document.querySelector("#inputcostoservice").value=a;const o=parseInt(e.target.value),n=parseInt(document.querySelector("#inputcostoservice").value);document.querySelector("#inputcostoservice").value=n-o;const l=e.target.options[this.options.selectedIndex].dataset.dcto;document.querySelector("input[name=promodcto]").value=l,t()}function t(){const e=document.querySelector("input[name=valordcto]"),t=parseInt(document.querySelector("#inputcostoservice").value);a=t;const o=document.querySelector("#devolucion"),n=parseInt(document.querySelector("#recibido").value);document.querySelector("input[name=valor_servicio]").value=t,n>=t?(o.value=n-t,e.value=0):(o.value=0,e.value=t-n),document.querySelector("input[name=total]").value=n-parseInt(o.value)}}}(),function(){if(document.querySelector("#servicios-grafica")){let e,t,o,n,a,l=0;citas100=0,progreso=440,(async()=>{try{const i="/admin/api/alldays",r=await fetch(i),c=await r.json(),s="/admin/api/totalcitas",d=await fetch(s),u=await d.json();c.reverse(),e=c.map(e=>e.fecha),t=c.map(e=>e.totaldia),a=u.filter(e=>"Cancelado"===e.estado),o=u.length-a.length,n=u.filter(e=>"Finalizada"===e.estado),l=n.reduce((e,t)=>e+parseInt(t.facturacion.total),0),o&&(citas100=100*n.length/o),progreso=440*citas100/100,function(){const o=document.getElementById("servicios-grafica").getContext("2d");new Chart(o,{type:"line",data:{labels:e,datasets:[{label:"# of Votes",data:t,borderColor:"#00c8c2",backgroundColor:"#ea580c"}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}(),function(){const e=document.querySelector("circle");e.style.strokeDashoffset=440-progreso,e.classList.add("animacion");document.querySelector(".dailyearning").textContent="$"+l;document.querySelector(".rueda .numero").textContent=Math.round(citas100)+"%"}()}catch(e){console.log(e)}})()}}(),function(){if(document.querySelector(".pagina2malla")){const t=document.querySelector("#selectempleadomalla");let o;function e(e,t){for(let o=0;t<2300;o++){let o=document.createElement("OPTION");(t+=30)%100==60&&(t+=40),o.value=t,o.textContent=t%100==0?parseInt(t/100)+":00":parseInt(t/100)+":"+t%100,e.appendChild(o)}}(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);o=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const n=o["empleado_"+t.target.value];document.querySelectorAll('.malla INPUT[type="checkbox"]').forEach(e=>{if(e.checked){e.checked=!1;for(let t=0;t<4;t++)e.parentElement.nextElementSibling.children[t].disabled=!0,0===t?e.parentElement.nextElementSibling.children[0].value="":e.parentElement.nextElementSibling.children[t].options[0].selected=!0}}),n&&n.forEach(t=>{const{inicioturno:o,inidescanso:n,findescanso:a,finturno:l}=t;let i=new Array(o,n,a,l);const r=document.querySelector(`input[data-id="${t.id_dia}"]`);r.checked=!0;for(let e=0;e<4;e++)r.parentElement.nextElementSibling.children[e].disabled=!1;document.querySelector(`#entrada[data-id="${t.id_dia}"]`).value=o.substring(0,2)+":"+o.substring(2,4);let c=document.querySelector(`#inidescanso[data-id="${t.id_dia}"]`);for(let t=0;t<3;t++){e(c,parseInt(i[t]));for(let e=0;e<c.options.length;e++)c.options[e].value==parseInt(i[t+1])&&(c.options[e].selected=!0);c=c.nextElementSibling}})})}}(),function(){if(document.querySelector(".headerapp__menu")){const e=document.querySelector("#btnmenu"),t=document.querySelector(".headerapp__navmenu");e.addEventListener("click",()=>{t.classList.toggle("mostrar")})}}(),document.querySelector(".promociones")&&console.log("promociones"),function(){if(document.querySelector(".reportes")){const t=document.querySelectorAll(".reportes__btn"),o=document.getElementById("miDialogo");function e(t){console.log(t.target),t.target===o&&(o.close(),document.removeEventListener("click",e))}t.forEach(t=>{t.addEventListener("click",()=>{o.showModal(),document.addEventListener("click",e)})})}}(),function(){const e=document.querySelectorAll("#servicio");function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let o=t.target.value.slice(0,e.dataset.num);t.target.value=o,e.textContent=0}})})}document.querySelectorAll(".servicios__eliminar").forEach(e=>{e.addEventListener("click",e=>{let t;e.target.href="/admin/servicios/eliminar",e.preventDefault(),t="I"===e.target.tagName?e.target.parentElement.parentElement.dataset.id:e.target.parentElement.dataset.id,Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el servcio?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{if(e.isConfirmed){Swal.fire("Eliminado","","success"),async function(){const e=new FormData;console.log(t),e.append("id",t);try{const o="/admin/api/eliminarservicio",n=await fetch(o,{method:"POST",body:e}),a=await n.json();console.log(a);document.querySelector(`div[data-id="${t}"]`).remove()}catch(e){console.log(e)}}()}})})}),e.forEach(e=>{e.addEventListener("click",e=>{if("DIV"===e.target.tagName||"P"===e.target.tagName||"H4"===e.target.tagName||"SPAN"===e.target.tagName){let o,n,a,l,i;l=l=e.target.dataset.id,i=e.target.dataset.user,"P"!==e.target.tagName&&"H4"!==e.target.tagName||(l=e.target.parentElement.dataset.id,i=e.target.parentElement.dataset.user),"SPAN"===e.target.tagName&&(l=e.target.parentElement.parentElement.dataset.id,i=e.target.parentElement.parentElement.dataset.user),parseInt(i)>1&&(o=document.querySelector(`div[data-id="${l}"] h4`).textContent,n=parseInt(document.querySelector(`div[data-id="${l}"] #precio`).textContent),a=parseInt(document.querySelector(`div[data-id="${l}"] #duracion`).textContent),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea editar el servcio?",html:`<form class="formulario" action="/admin/servicios/editar" method="POST">\n                                    <input type="hidden" name="id" value="${l}" >\n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="nombre">Nombre:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="text" placeholder="Nombre del servicio" id="nombre" name="nombre" value="${o}" required>\n                                            <label data-num="25" class="count-charts" for="">25</label>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="precio">Precio:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="number" placeholder="Precio del servicio" id="precio" name="precio" value="${n}" requiered>\n                                            <label for="">$</label>\n                                        </div>\n                                    </div>\n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="duracion">Duracion:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="number" min="10" max="120" placeholder="Duracion en minutos del servicio" id="duracion" name="duracion" value="${a}" disabled>\n                                            <label for="">min</label>\n                                        </div>\n                                    </div>\n                                    <input class="formulario__submit--servicio" type="submit" value="Actualizar">\n                            </form>`,showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Cancelar"}),t())}})}),t(),document.querySelector(".alerta")&&setTimeout(()=>{document.querySelector(".alerta").remove()},5e3)}(),window.swiper=new Swiper("swiper",{el:".slider__contenido",slideClass:"slider__slide",createElements:!0,autoplay:{delay:5e3},loop:!0});
//# sourceMappingURL=bundle.js.map
