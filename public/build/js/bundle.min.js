function scrolnav(){document.querySelectorAll(".dashboard__menu a").forEach((function(e){if(e.classList.contains("dashboard__enlace--actual")){document.querySelector("."+e.firstElementChild.nextElementSibling.textContent).scrollIntoView({behavior:"smooth"})}}))}!function(){if(document.querySelector(".barraprogreso")){const e=document.querySelectorAll("#negocio"),t=document.querySelector(".barraprogreso__label"),n=document.querySelector(".barraprogreso__barra");let a=0;e.forEach(e=>{e.value&&a++}),n.classList.add("animation"),t.textContent=(100*a/11).toFixed(1)+"%";document.querySelector(".animation").style.width=t.textContent}if(document.querySelector(".cambiopaginas")){const e=document.querySelectorAll(".cambiopaginas span");e[0].classList.add("resaltar"),document.querySelector(".perfil")?document.querySelector(".pagina3").classList.add("mostrarseccion"):document.querySelector(".pagina1").classList.add("mostrarseccion"),e.forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("resaltar")||(e.forEach(e=>e.classList.remove("resaltar")),t.target.classList.add("resaltar"));document.querySelectorAll(".paginas").forEach(e=>e.classList.remove("mostrarseccion")),document.querySelector("."+t.target.id).classList.add("mostrarseccion")})})}document.querySelectorAll(".dia input[type=checkbox]").forEach(e=>{e.addEventListener("change",(function(e){if(this.checked)for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!1;else for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!0}))});document.querySelectorAll("#entrada").forEach(e=>{e.addEventListener("change",e=>{!function e(t,n){for(;t.firstChild;)t.removeChild(t.firstChild);let a=n.target.value.split(":"),o=parseInt(a[0]+a[1]);for(let e=0;o<2300;e++){let e=document.createElement("OPTION");o+=30,o%100==60&&(o+=40),e.value=o,a[0]=parseInt(o/100),a[1]=o%100,0===a[1]&&(a[1]="00"),e.textContent=a[0]+":"+a[1],t.appendChild(e)}t.addEventListener("change",t=>{let n=t.target.nextElementSibling;n&&e(n,t)})}(e.target.nextElementSibling,e)})})}(),function(){if(document.querySelector("#dashboardcitas")){const c=document.querySelector("#filtros-personalizado"),s=document.querySelector("#selectprofesional"),d=document.querySelector("#fecha"),u=document.querySelector("#crearcita"),m=document.querySelector("#crearcitanoreg"),p=document.querySelectorAll(".programar");c&&c.addEventListener("click",()=>{let e=s.options[s.options.selectedIndex].value;e&&Swal.fire({customClass:{},title:"Consulta el profesional por fecha:",html:`<form class="formulario" action="/admin/citas/consultaxprofesxfecha?pagina=1" method="POST">    \n                                    <div class="formulario__campo">\n                                        <input class="formulario__input" id="fecha" type="date" name="fecha" value=" " required>\n                                    </div>\n                                    <input type="hidden" name="profesional" value="${e}">\n                                    <input class="btnsmall" type="submit" value="Consultar">\n                            </form>`,showCancelButton:!1,showConfirmButton:!1})}),d.addEventListener("input",e=>{window.location="/admin/citas/filtroxfecha?pagina=1&fecha="+e.target.value});let f,v,h,_,g,b,y,S,E,C=0,q=[],w=[];function e(e,t,n,a){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:e,html:`<form class="formulario modalform" action="${n}" method="POST">\n                            <input type="hidden" id="id_empserv" name="id_empserv" value="" >\n                            <input type="hidden" id="hora_fin" name="hora_fin" value="" >\n\n                            <div class="">\n                                ${a}\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="servicios">Seleccione Servicio: </label>\n                                    <select class="formulario__select" name="idservicio" id="servicios" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="professionals">Seleccione Profesional: </label>\n                                    <select class="formulario__select" name="nameprofesional" id="professionals" required>\n                                        <option value="" disabled selected> -Selecionar- </option>\n                                    </select>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="date">Seleccionar Fecha:</label>\n                                    <input class="formulario__input" id="date" name="fecha_fin" type="date" disabled required>\n                                </div>\n                            </div>\n                            \n                            <div class="cliente__campohoras" id="horas">\n\n                            </div>\n                            <input class="clientes-btn" type="submit" value="${t}">\n                       </form>`,showCancelButton:!0,showConfirmButton:!1})}function t(){const e=document.querySelector("#servicios");v.forEach(t=>{const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}),e.addEventListener("change",e=>n(e.target.value))}function n(e){const t=document.querySelector("#professionals"),n=h.filter(t=>t.idservicio===e);r(t),document.querySelector("#date").disabled=!0,r(document.querySelector("#horas"));const a=document.createElement("OPTION");a.value="",a.textContent=" -Selecionar- ",a.selected=!0,a.disabled=!0,t.appendChild(a),n.forEach(e=>{const n=document.createElement("OPTION");n.value=e.idempleado,n.textContent=e.nombre,n.dataset.id=e.id,t.appendChild(n)}),t.addEventListener("change",e=>{document.querySelector("#date").disabled=!1,document.querySelector("#date").value="",function(){const e=document.querySelector("#date"),t=new Date,n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();let l=`${n}-${a}-${o}`;a<10&&(l=`${n}-0${a}-${o}`);a<10&&o<10&&(l=`${n}-0${a}-0${o}`);a>=10&&o<10&&(l=`${n}-${a}-0${o}`);e.min=l}(),r(document.querySelector("#horas"))})}function a(){document.querySelector("#date").addEventListener("input",e=>{r(document.querySelector("#horas"));const t=new Date(e.target.value);o(e.target.value,t.getUTCDay())})}function o(e,t){const n=document.querySelector("#professionals"),a=n.options[n.options.selectedIndex].value;document.querySelector("#id_empserv").value=n.options[n.options.selectedIndex].dataset.id,S=g["empleado_"+a],y=_.filter(e=>a===e.empleado_id),E=b.filter(t=>t.idempleado===a&&t.fecha_fin===e&&"Pendiente"===t.estado),console.log(b);if(y.some(t=>t.fecha===e))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const e=S.filter(e=>e.id_dia==(0===t?7:t));e.length?function(e){let t=[],n=[];t=[...t,e.inicioturno,e.inidescanso],n=[...n,e.findescanso,e.finturno],t=t.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),n=n.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),w=E.map(e=>e.hora_fin);for(let e=0;e<t.length-1;e++)l(t[e],t[e+1]);for(let e=0;e<n.length-1;e++)l(n[e],n[e+1]);console.log(q),function(){const e=document.querySelector("#horas");q.forEach(t=>{const n=document.createElement("DIV");n.classList.add("cliente__hora");const a=document.createElement("P");a.textContent=t,a.dataset.hora=t,a.onclick=i,a.classList.add("texthora"),n.appendChild(a),e.appendChild(n)})}()}(e[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}function l(e,t){const n=new Date("01/01/2000 "+e),a=new Date("01/01/2000 "+t);for(a.setTime(a.getTime()-6e4*Math.floor(C));n<=a;){const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");w.includes(`${e}:${t}`)||(q=[...q,`${e}:${t}`]),n.setTime(n.getTime()+6e4*C)}}function i(e){const t=document.querySelector(".horaselect");t&&t.classList.remove("horaselect"),e.target.parentElement.classList.add("horaselect"),document.querySelector("#hora_fin").value=e.target.textContent}function r(e){for(q=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);C=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/allclientes",t=await fetch(e);f=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getservices",t=await fetch(e);v=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);h=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);_=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);g=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);b=await t.json()}catch(e){console.log(e)}})(),u.addEventListener("click",n=>{n.preventDefault();e("Crear Cita","Crear","/admin/citas/crear?pagina=1",'<div class="formulario__campo">\n                                <label class="formulario__label" for="usuario">Seleccione Usuario: </label>\n                                <select class="formulario__select" name="id_usuario" id="usuario" required>\n                                    <option value="" disabled selected> -Selecionar- </option>\n                                </select>\n                            </div>'),function(){const e=document.querySelector("#usuario");f.forEach(t=>{if(2!=t.id){const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre+" "+t.apellido,e.appendChild(n)}})}(),t(),a()}),p.forEach(l=>{l.addEventListener("click",l=>{const i=l.target.parentElement.parentElement.previousElementSibling.textContent;"Pendiente"!==i&&"Out"!==i||(e("Reprogramar Cita A:","Enviar","/admin/citas?pagina=1",'<span class="namecliente"></span><span id="horacita"></span>\n                                <input type="hidden" id="id" name="id" value="" >'),function(e){t();const l=e.parentElement.parentElement.parentElement,i=l.children[0].textContent,r=l.children[1].textContent,c=l.children[3].textContent,s=l.children[4].textContent,d=l.children[5].textContent,u=l.children[6].textContent,m=document.querySelector(".namecliente"),p=document.querySelector("#servicios"),f=document.querySelector("#professionals"),v=document.querySelector("#date");m.textContent=r+" - ",document.querySelector("#horacita").textContent=u,document.querySelector("#id").value=i,document.querySelector("#hora_fin").value=u;for(let e=0;e<p.options.length;e++)p.options[e].textContent===c&&(p.options[e].selected=!0);n(p.options[p.options.selectedIndex].value);for(let e=0;e<f.options.length;e++)f.options[e].textContent===s&&(f.options[e].selected=!0,document.querySelector("#id_empserv").value=f.options[e].dataset.id);v.value=d,a();const h=new Date(d);o(d,h.getUTCDay())}(l.target))})}),m.addEventListener("click",n=>{n.preventDefault();e("Cita Para Cliente No Registrado","Crear","/admin/citas/crear?pagina=1",'<div class="formulario__campo">\n                                <label class="formulario__label" for="nombrecliente">Nombre del cliente: </label>\n                                <input class="formulario__input" id="nombrecliente" name="nombrecliente" type="text" required>\n                            </div>\n                            <input type="hidden" name="id_usuario" value="2" >\n                            '),t(),a()})}}(),function(){if(document.querySelector(".clientes")){const n=document.querySelector("#crearcliente"),a=document.querySelectorAll("#editar"),o=document.querySelectorAll("#hab_desh");let l={titulo:"",url:"",submit:"",nombre:"",apellido:"",movil:"",email:""};function e(e,t){let{titulo:n,url:a,submit:o,nombre:l,apellido:i,movil:r,email:c,password:s}=e;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:n,html:`<form class="formulario modalform" action="${a}" method="POST">\n                            <input type="hidden" name="id" value="${t}" >\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nombre">Nombre:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nombre del cliente" id="nombre" name="nombre" value="${l}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="apellido">Apellido:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Apellido del cliente" id="apellido" name="apellido" value="${i}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="movil">Movil</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="number" placeholder="Movil del cliente" id="movil" name="movil" value="${r}" required>\n                                    <label data-num="10" class="count-charts" for="">10</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="email">Email</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="email" placeholder="Email del cliente" id="email" name="email" value="${c}" required>\n                                    <label data-num="40" class="count-charts" for="">40</label>\n                                </div>\n                            </div>\n                            ${s}\n                            <input class="clientes-btn" type="submit" value="${o}">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1})}function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})}n.addEventListener("click",()=>{l.titulo="Crear Cliente Nuevo",l.url="/admin/clientes/crear",l.submit="Crear Cliente",l.nombre="",l.apellido="",l.movil="",l.email="",l.password='<div class="formulario__campo">\n                                    <label class="formulario__label" for="password">Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Password del cliente" id="password" name="password" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="password2">Repetir Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Repetir Password" id="password2" name="password2" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>',e(l,0),t()}),a.forEach(n=>{n.addEventListener("click",n=>{l.titulo="Actualizar Cliente",l.url="/admin/clientes/actualizar",l.submit="Actualizar";const a=n.target.parentElement.parentElement.parentElement;l.nombre=a.children[1].textContent,l.apellido=a.children[2].textContent,l.movil=a.children[3].textContent,l.email=a.children[4].textContent,l.password="",e(l,n.target.parentElement.dataset.id),t()})}),o.forEach(e=>{e.addEventListener("click",e=>{let t="Desea bloquear el cliente?";e.target.classList.contains("habilitar")&&(t="Desea habilitar el cliente?");const n=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:t,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/clientes/hab_desh?id="+n)})})})}}(),function(){if(document.querySelector(".pagina5")){let t=[];const n=document.querySelectorAll('.mediospago__mediopago input[type="checkbox"]'),a=document.querySelector("#btnmediopago");(async()=>{try{const e="/admin/api/getmediospago",a=await fetch(e);!function(e){n.forEach(n=>{const a=e.find(e=>e.id==n.value);"1"===a.estado&&(n.checked=!0,t=[...t,a.id])})}(await a.json())}catch(e){console.log(e)}})(),n.forEach(e=>{e.addEventListener("change",e=>{t=e.target.checked?[...t,e.target.value]:t.filter(t=>t!=e.target.value)})}),a.addEventListener("click",()=>{(async()=>{const n=new FormData;n.append("ids",t);try{const t="/admin/api/setmediospago",a=await fetch(t,{method:"POST",body:n});await a.json()?e("Medios de pago actualizados","alerta__exito",document.querySelector(".mediospago")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".mediospago"))}catch(e){console.log(e)}})()});const o=document.querySelector("#formhabilitarempleado"),l=document.querySelector("#dardealtaselectempleado");l.addEventListener("change",e=>{const t=e.target.options[e.target.options.selectedIndex].dataset.restriccion;document.querySelector('.creacioncuentas__habilitaremp input[name="admin"]:checked')&&(document.querySelector('.creacioncuentas__habilitaremp input[name="admin"]:checked').checked=!1),2==t&&(document.querySelector(".creacioncuentas__habilitaremp #roladmin").checked=!0),1==t&&(document.querySelector(".creacioncuentas__habilitaremp #rolempleado").checked=!0)}),o.addEventListener("submit",t=>{t.preventDefault();const n=document.querySelector('input[name="admin"]:checked').value,a=l.options[l.options.selectedIndex].value;(async()=>{const t=new FormData;t.append("idempleado",a),t.append("tiporol",n);try{const a="/admin/api/habilitarempleado",o=await fetch(a,{method:"POST",body:t});await o.json()?(l.options[l.options.selectedIndex].dataset.restriccion=n,e("Empleado dado de alta en sistema administrativo","alerta__exito",document.querySelector(".creacioncuentas__habilitaremp"))):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".creacioncuentas__habilitaremp"))}catch(e){console.log(e)}})()});const i=document.querySelector("#formsetearpass"),r=document.querySelector("#selectsetearpass");i.addEventListener("submit",t=>{t.preventDefault();const n=r.options[r.options.selectedIndex].value;(async()=>{const t=new FormData;t.append("idempleado",n);try{const n="/admin/api/setearpass",a=await fetch(n,{method:"POST",body:t}),o=await a.json();console.log(o),o?e("Password reiniciado por defecto","alerta__exito",document.querySelector(".creacioncuentas__setearpass")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".creacioncuentas__setearpass"))}catch(e){console.log(e)}})()});document.querySelector("#formcolores").addEventListener("submit",t=>{t.preventDefault();const n=document.querySelector(".coloresapp #principal").value,a=document.querySelector(".coloresapp #secundario").value;(async()=>{const t=new FormData;t.append("colorprincipal",n),t.append("colorsecundario",a);try{const n="/admin/api/coloresapp",a=await fetch(n,{method:"POST",body:t});await a.json()?e("Colores establecidos exitosamente","alerta__exito",document.querySelector(".coloresapp")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".coloresapp"))}catch(e){console.log(e)}})()}),(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);!function(e){const t=document.querySelector("#selecttime");for(let n=1;n<=t.options.length;n++)if(t.options[n].value==e){t.options[n].selected=!0;break}}(await t.json())}catch(e){console.log(e)}})();function e(e,t,n){const a=document.createElement("P");a.textContent=e,a.classList.add("alerta",t),n.insertBefore(a,n.querySelector(".configuracion__heading")),setTimeout(()=>{document.querySelector(".alerta").remove()},5e3)}document.querySelector("#formtimeserv").addEventListener("submit",t=>{t.preventDefault();const n=document.querySelector("#selecttime"),a=n.options[n.options.selectedIndex].value,o=new FormData;o.append("timeservice",a),(async()=>{try{const t="/admin/api/tiemposervicio",n=await fetch(t,{method:"POST",body:o}),a=await n.json();console.log(a),a?e("Tiempo del servicio establecido","alerta__exito",document.querySelector(".tiemposervicio")):e("Se produjo un error intentalo nuevamente","alerta__error",document.querySelector(".tiemposervicio"))}catch(e){console.log(e)}})()})}}(),function(){if(document.querySelector(".creardescuento")){const t=document.querySelector("#categoria"),n=document.querySelector("#product_serv"),a=document.querySelector("#tipo"),o=document.querySelector("#dcto1"),l=document.querySelector("#dcto2"),i=document.querySelector("#dcto2Valor"),r=document.querySelector("#fecha_ini");let c,s;function e(e){"porcentaje"==a.options[a.options.selectedIndex].value&&(e>100&&(o.value=100),e<0&&(o.value=0),l.value=Math.round(s*o.value/100)),"valor"==a.options[a.options.selectedIndex].value&&(e>parseInt(s)&&(o.value=s),e<0&&(o.value=0),l.value=Math.round(100*o.value/s))}!function(){const e=new Date;e.setDate(e.getDate());const t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();let o=`${t}-${n}-${a}`;n<10&&a<10&&(o=`${t}-0${n}-0${a}`);n<10&&a>=10&&(o=`${t}-0${n}-${a}`);n>=10&&a<10&&(o=`${t}-${n}-0${a}`);r.min=o}(),(async()=>{try{const e="/admin/api/getservices",t=await fetch(e);c=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",e=>{!function(e){horasdisponibles=[];for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}(n);const t=document.createElement("OPTION");t.value="",t.textContent="Seleccionar Producto",n.appendChild(t),a.disabled=!0,o.disabled=!0,"servicios"==e.target.value&&c.forEach(e=>{const t=document.createElement("OPTION");t.value=e.id,t.textContent=e.nombre,n.appendChild(t)}),e.target.value}),n.addEventListener("change",t=>{const n=c.filter(e=>e.id==t.target.value);s=n[0].precio,document.querySelector("#valorservicio").textContent="$ "+s,a.disabled=!1,e(o.value)}),a.addEventListener("change",t=>{"porcentaje"==t.target.value&&(o.min=0,o.max=100,i.textContent="Valor"),"valor"==t.target.value&&(o.min=0,o.max=s,i.textContent="Valor (%)"),o.disabled=!1,e(o.value)}),o.addEventListener("input",t=>{e(t.target.value)}),r.addEventListener("change",e=>{const t=document.querySelector("#fecha_fin");t.disabled=!1;const n=new Date(e.target.value);n.setDate(n.getDate()+2);const a=n.getFullYear(),o=n.getMonth()+1,l=n.getDate();let i=`${a}-${o}-${l}`;o<10&&l<10&&(i=`${a}-0${o}-0${l}`),o<10&&l>=10&&(i=`${a}-0${o}-${l}`),o>=10&&l<10&&(i=`${a}-${o}-0${l}`),t.min=i})}}(),document.addEventListener("DOMContentLoaded",(function(){scrolnav()})),function(){if(document.querySelector("#dash-cliente")){const n=document.querySelector("#servicio"),a=document.querySelector("#profesional"),o=document.querySelector("#date"),l=document.querySelectorAll("#cancelado");let i;function e(e){const n=i.filter(t=>t.idservicio===e);t(a),t(document.querySelector("#horas"));const o=document.createElement("OPTION");o.value="",o.textContent=" -Selecionar- ",o.selected=!0,o.disabled=!0,a.appendChild(o),n.forEach(e=>{const t=document.createElement("OPTION");t.value=e.idempleado,t.textContent=e.nombre,t.dataset.id=e.id,a.appendChild(t)})}function t(e){for(horasdisponibles=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}o.disabled=!0,(async()=>{try{const t="/admin/api/getemployee_services",a=await fetch(t);i=await a.json(),function(){const t=new URLSearchParams(window.location.search),a=t.get("id"),o=t.get("valordcto");if(a){n.classList.add("servicioselected");for(let e=1;e<=n.options.length;e++)if(n.options[e].value==a){n.options[e].selected=!0;let t=n.options[e].textContent.split(" - ");t=t[0]+" - "+o,n.options[e].textContent=t;break}e(a)}}()}catch(e){console.log(e)}})(),function(){const e=document.querySelector("#date"),t=new Date;t.setDate(t.getDate()+1);const n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();let l=`${n}-${a}-${o}`;a<10&&o<10&&(l=`${n}-0${a}-0${o}`);a<10&&o>=10&&(l=`${n}-0${a}-${o}`);a>=10&&o<10&&(l=`${n}-${a}-0${o}`);e.min=l}(),n.addEventListener("change",t=>{o.disabled=!0,n.classList.remove("servicioselected"),e(t.target.value)}),l.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement;!function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES SOLICITAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&(async()=>{try{const n="/admin/api/cancelarcita?id="+e,a=await fetch(n);await a.json()?(t.remove(),Swal.fire("Cita Cancelada","","success")):Swal.fire("No se pudo cancelar intentalo nuevamente","","error")}catch(e){console.log(e)}})()})}(e.target.parentElement.dataset.id,t)})})}}(),function(){if(document.querySelector("#dash-cliente")){const o=document.querySelector("#telcliente").textContent;let l=0,i=[],r=[];const c=document.querySelector("#horas");function e(e,t){const n=new Date("01/01/2000 "+e),a=new Date("01/01/2000 "+t);for(a.setTime(a.getTime()-6e4*Math.floor(l));n<=a;){const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");r.includes(`${e}:${t}`)||(i=[...i,`${e}:${t}`]),n.setTime(n.getTime()+6e4*l)}}const s=document.querySelector("#profesional"),d=document.querySelector("#date");let u,m,p,f,v,h;(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);l=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);u=await t.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);m=await t.json()}catch(e){console.log(e)}})();const _=async()=>{try{const e="/admin/api/getcitas",t=await fetch(e);p=await t.json()}catch(e){console.log(e)}};function t(t,a){const o=s.options[s.options.selectedIndex].value;h=p.filter(e=>e.idempleado===o&&e.fecha_fin===t&&"Pendiente"===e.estado);if(f.some(e=>e.fecha===t))Swal.fire("Este dia no esta disponible!","You clicked the button!","error");else{const t=v.filter(e=>e.id_dia==(0===a?7:a));t.length?function(t){let a=[],o=[];a=[...a,t.inicioturno,t.inidescanso],o=[...o,t.findescanso,t.finturno],a=a.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),o=o.map(e=>e=e.substring(0,2)+":"+e.substring(2,4)),r=h.map(e=>e.hora_fin);for(let t=0;t<a.length-1;t++)e(a[t],a[t+1]);for(let t=0;t<o.length-1;t++)e(o[t],o[t+1]);console.log(i),i.forEach(e=>{const t=document.createElement("DIV");t.classList.add("cliente__hora");const a=document.createElement("P");a.textContent=e,a.dataset.hora=e,a.onclick=n,a.classList.add("texthora"),t.appendChild(a),c.appendChild(t)})}(t[0]):Swal.fire("Este dia no esta disponible!","You clicked the button!","error")}}function n(e){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Reservar La Cita?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const t=new FormData,n=s.options[s.options.selectedIndex],a=document.querySelector("#servicio").options[document.querySelector("#servicio").options.selectedIndex].value,l=new Date;t.append("telcliente",o),t.append("id_empserv",n.dataset.id),t.append("fecha_inicio",l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()),t.append("fecha_fin",d.value),t.append("hora",l.toLocaleTimeString([],{hour12:!1})),t.append("hora_fin",e),t.append("idservicio",a),t.append("nameprofesional",n.value);try{const e="/admin/api/enviarcita",n=await fetch(e,{method:"POST",body:t});return!!(await n.json())[0]}catch(e){console.log(e)}}(e.target.dataset.hora).then(e=>{e?(Swal.fire("Cita Programada","","success"),setTimeout(()=>{window.location.reload()},1500)):Swal.fire("No fue posible agendar cita, Intentalo de nuevo","","error")})})}function a(e){for(i=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}_(),setInterval(()=>{if(_(),""==!d.value&&document.querySelector(".cliente__hora")){const e=new Date(d.value);a(c),t(d.value,e.getUTCDay())}},3100),s.addEventListener("change",e=>{a(c),d.disabled=!1,d.value="",v=m["empleado_"+e.target.value],f=u.filter(t=>e.target.value===t.empleado_id)}),d.addEventListener("input",e=>{a(c);const n=new Date(e.target.value);t(e.target.value,n.getUTCDay())})}}(),function(){if(document.querySelector("#dashboardcitas")){document.querySelectorAll(".factura").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,n=t.children[7].textContent,a=t.children[0].textContent;"Finalizada"===n&&(async()=>{try{const e="/admin/api/detallepagoxcita?id="+a,n=await fetch(e);!function(e,t){console.log(e);const{id:n,idcita:a,recibido:o,devolucion:l,fecha_pago:i,hora_pago:r,dcto:c,valordcto:s,valorpromo:d,valor_servicio:u,total:m}=e;console.log(o),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Detalle Del Pago",html:`\n                    <h4 class="orden">App Barber</h4>\n                    <div class="recibo">\n                        <p class="recibo__titulo">NÂº De Pago: ${n}</p>\n                        <p class="recibo__titulo">Orden Cita: ${a}</p>\n                        <div class="recibo__datos">\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Cliente:</p>\n                                <p class="recibo__texto">${t.children[1].textContent}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">profesional:</p>\n                                <p class="recibo__texto">${t.children[4].textContent}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">servicio:</p>\n                                <p class="recibo__texto">${t.children[3].textContent}</p>\n                            </div>\n                        </div>\n                        <div class="recibo__datos">\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Fecha:</p>\n                                <p class="recibo__texto">${i}, ${r}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Valor Servicio:</p>\n                                <p class="recibo__texto">$${u}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Recibido:</p>\n                                <p class="recibo__texto">$${o}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Devolucion:</p>\n                                <p class="recibo__texto">$${l}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Promo Aplicado:</p>\n                                <p class="recibo__texto">$${d}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Dcto Manual:</p>\n                                <p class="recibo__texto">$${s}</p>\n                            </div>\n                            <div class="recibo__dato">\n                                <p class="recibo__titulo">Total:</p>\n                                <p class="recibo__texto">$${m}</p>\n                            </div>\n                        </div>\n                    </div>`,width:"auto",showCancelButton:!0,confirmButtonText:"Anular Pago"}).then(e=>{e.isConfirmed&&Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea anular el pago?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&async function(e){try{const t="/admin/api/anularpagoxcita?id="+e,n=await fetch(t);return await n.json()}catch(e){console.log(e)}}(n).then(e=>{e?(!function(e){e.children[7].textContent="Pendiente",e.classList.remove("tr-resaltar")}(t),Swal.fire("Anulado!","","success")):Swal.fire("No se permite de dias anteriores!","","error")})})})}(await n.json(),t)}catch(e){console.log(e)}})()})})}}(),function(){if(document.querySelector(".formulario__fieldset--servicios")){const a=document.querySelector(".pagina1 .formulario__campostags"),o=document.querySelector(".pagina4 .formulario__campostags"),l=document.querySelector(".pagina1 .formulario__tagselect"),i=document.querySelector(".pagina4 .formulario__tagselect"),r=document.querySelector('.pagina1 [name="servicios"]'),c=document.querySelector('.pagina4 [name="servicios"]'),s=document.querySelector("#selectemployee"),d=document.querySelector("#eliminaremployee");let u,m=[],p=[],f=[];l.classList.add("selectskills1");for(let e=1;e<i.options.length;e++){let t={id:i.options[e].value,nombre:i.options[e].textContent};m=[...m,t]}function e(e,a,o){const l=document.createElement("DIV");l.classList.add("formulario__tag");const i=document.createElement("SPAN");i.textContent=e,i.id=a;const r=document.createElement("I");return r.classList.add("fa-solid"),r.classList.add("fa-rectangle-xmark"),r.onclick=function(e){!function(e,a){let o=e.target.previousElementSibling;n(a,{id:o.id,nombre:o.textContent}),e.target.parentElement.remove(),a.classList.contains("selectskills1")?p=p.filter(e=>e!=o.id):f=f.filter(e=>e!=o.id);t()}(e,o)},l.appendChild(i),l.appendChild(r),l}function t(){r.value=p.toString(),c.value=f.toString()}function n(e,t){const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}(async()=>{try{const e="/admin/api/getAllemployee",t=await fetch(e);u=await t.json()}catch(e){console.log(e)}})(),l.addEventListener("change",n=>{p=[...p,n.target.options[l.options.selectedIndex].value];let o=e(n.target.options[l.options.selectedIndex].textContent,n.target.options[l.options.selectedIndex].value,l);a.appendChild(o),l.options[l.options.selectedIndex].remove(),l.options[0].selected=!0,t()}),s.addEventListener("change",a=>{let l;document.querySelectorAll(".pagina4 .formulario__tag").forEach(e=>{e.remove()}),d.href="/admin/adminconfig/eliminaremployee?id="+a.target.value,l=u.filter(e=>e.id==a.target.value),function(a){const{servicios:l}=a[0];document.querySelector(".pagina4 #nombre").value=a[0].nombre,document.querySelector(".pagina4 #apellido").value=a[0].apellido,document.querySelector(".pagina4 #movil").value=a[0].movil,document.querySelector(".pagina4 #email").value=a[0].email,document.querySelector(".pagina4 #departamento").value=a[0].departamento,document.querySelector(".pagina4 #ciudad").value=a[0].ciudad,document.querySelector(".pagina4 #direccion").value=a[0].direccion,f=[],m.forEach(e=>{let t=1;for(;t<i.options.length&&e.id!=i.options[t].value;t++);t===i.options.length&&n(i,{id:e.id,nombre:e.nombre})}),l.forEach(t=>{f=[...f,t.id];let n=e(t.nombre,t.id,i);o.appendChild(n),i.querySelector(`option[value="${t.id}"`)&&i.querySelector(`option[value="${t.id}"`).remove()}),i.options[0].selected=!0,t()}(l)}),i.addEventListener("change",n=>{f=[...f,n.target.options[i.options.selectedIndex].value];let a=e(n.target.options[i.options.selectedIndex].textContent,n.target.options[i.options.selectedIndex].value,i);o.appendChild(a),i.options[i.options.selectedIndex].remove(),i.options[0].selected=!0,t()}),d.addEventListener("click",e=>{e.preventDefault(),e.target.href.includes("?id=")&&Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el empleado?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(window.location=e.target.href)})})}}(),function(){if(document.querySelector(".facturacion")){let t,n;(async()=>{try{const e="/admin/api/getservices",n=await fetch(e);t=await n.json()}catch(e){console.log(e)}})(),(async()=>{try{const e="/admin/api/getemployee_services",t=await fetch(e);n=await t.json(),console.log(n)}catch(e){console.log(e)}})();document.querySelector("#fecha").addEventListener("input",e=>{window.location="/admin/facturacion/buscarxfecha?pagina=1&fecha="+e.target.value});document.querySelector("#pagar").addEventListener("click",()=>{Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Pago De Servicio",html:'<form class="formulario modalform" action="/admin/facturacion" method="POST">\n                            <input type="hidden" name="total" value="" >\n                            <input type="hidden" name="dcto" value="0">\n                            <input type="hidden" name="valordcto" value="0">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="servicios">Servicios:</label>\n                                <select class="formulario__select" name="idservicio" id="selectservice" required>\n                                    <option value="" disabled selected> Seleccionar Servicio</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="empleado">Empleado:</label>\n                                <select class="formulario__select" name="idempleado" id="selectemployee" required>\n                                    <option value="" disabled selected> Seleccionar Empleado </option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="valor_servicio">Total a pagar:</label>\n                                <input class="formulario__input" type="number" id="valor_servicio" name="valor_servicio" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="mediopago">Elegir Medio De Pago:</label>\n                                <select class="formulario__select" name="idmediospago" id="mediopago">\n                                    <option value="" disabled selected> Seleccionar medio pago</option>\n                                </select> \n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",e),function(){const e=document.querySelector("#selectservice");t.forEach(t=>{const n=document.createElement("OPTION");n.value=t.id,n.textContent=t.nombre,e.appendChild(n)}),e.addEventListener("change",e=>{!function(e){const t=document.querySelector("#selectemployee"),a=n.filter(t=>t.idservicio===e);!function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}(t);const o=document.createElement("OPTION");o.value="",o.textContent=" Seleccionar Empleado ",o.selected=!0,o.disabled=!0,t.appendChild(o),a.forEach(e=>{const n=document.createElement("OPTION");n.value=e.idempleado,n.textContent=e.nombre,n.dataset.id=e.id,t.appendChild(n)})}(e.target.value),function(e){const n=document.querySelector("#valor_servicio"),a=t.filter(t=>t.id==e.target.value);n.value=a[0].precio,document.querySelector("#recibido").value="",document.querySelector("#devolucion").value=""}(e)})}(),a(),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})});const a=async()=>{try{const e="/admin/api/getmediospago",t=await fetch(e);!function(e){const t=document.querySelector("#mediopago");e.forEach(e=>{if("1"===e.estado){const n=document.createElement("OPTION");n.value=e.id,n.textContent=e.mediopago,t.appendChild(n)}})}(await t.json())}catch(e){console.log(e)}};function e(){const e=document.querySelector("input[name=valordcto]"),t=parseInt(document.querySelector("#valor_servicio").value),n=document.querySelector("#devolucion"),a=parseInt(document.querySelector("#recibido").value);a>=t?(n.value=a-t,e.value=0):(n.value=0,e.value=t-a),document.querySelector("input[name=total]").value=a-parseInt(n.value)}}}(),function(){if(document.querySelector(".descpagina3")){const t=document.querySelector("#selectemployeedate"),n=document.querySelector(".viewdates");let a;async function e(e){console.log(e.target.id);try{const t="/admin/api/deletefechadesc?id="+e.target.id,n=await fetch(t);1==await n.json()&&document.querySelector(`i[id="${e.target.id}"]`).parentElement.remove()}catch(e){console.log(e)}}(async()=>{try{const e="/admin/api/getfechadesc",t=await fetch(e);a=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const o=a.filter(e=>e.empleado_id==t.target.value);!function(){for(;n.firstChild;)n.removeChild(n.firstChild)}(),function(t){t.forEach(t=>{const a=document.createElement("DIV");a.classList.add("viewdates__viewdate"),a.dataset.id=t.id;const o=document.createElement("P");o.classList.add("viewdates__fecha"),o.textContent=t.fecha;const l=document.createElement("I");l.classList.add("fa-solid","fa-rectangle-xmark"),l.id=t.id,l.onclick=e,a.appendChild(o),a.appendChild(l),n.appendChild(a)})}(o)})}}(),function(){if(document.querySelector(".fidelizacion")){const t=document.querySelectorAll(".programar"),n=document.querySelectorAll(".cancelado"),a=document.querySelectorAll(".sendmsj");let o={};function e(e,t){const n=document.querySelector("#dcto1"),a=document.querySelector("#dcto2"),l=document.querySelector("#dcto2Valor");"porcentaje"==t.options[t.options.selectedIndex].value&&(n.min=0,n.max=100,l.textContent="Valor",e>100&&(n.value=100),e<0&&(n.value=0),a.value=Math.round(o.valorservicio*n.value/100)),"valor"==t.options[t.options.selectedIndex].value&&(n.min=0,n.max=o.valorservicio,l.textContent="Valor (%)",e>parseInt(o.valorservicio)&&(n.value=o.valorservicio),e<0&&(n.value=0),a.value=Math.round(100*n.value/o.valorservicio))}t.forEach(t=>{t.addEventListener("click",t=>{const n=t.target.parentElement.parentElement.parentElement;o.id=t.target.parentElement.dataset.id,o.nombreproducto=n.children[2].textContent,o.valorservicio=n.children[3].textContent.slice(1),o.dcto=n.children[4].textContent,o.valorfinal=n.children[5].textContent,o.fecha_fin=n.children[7].textContent,function(t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Actualizar Oferta",html:`<form class="formulario modalform" action="/admin/fidelizacion/editar_dctoxproduct" method="POST">\n                            <input type="hidden" name="id" value="${t.id}" >\n                            \n                            <span class="nameuser">${t.nombreproducto}</span>\n                            <span class="precio">Valor: ${t.valorservicio}</span>\n                            <span class="nameuser">Dcto: ${t.dcto}</span>\n                            <span class="nameuser">Valor Final: ${t.valorfinal}</span>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="tipo">Tipo De Dcto: </label>\n                                <select class="formulario__select" name="tipo" id="tipo" required>\n                                    <option value="" disabled selected> Seleccionar tipo de dcto</option>\n                                    <option value="porcentaje">Porcentaje</option>\n                                    <option value="valor">Valor</option>\n                                </select>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="dcto1">Descuento</label>\n                                <input class="formulario__input" id="dcto1" type="number" min="" max="" name="dcto1" value="" disabled required>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="dcto2" id="dcto2Valor">Valor</label>\n                                <input class="formulario__input" id="dcto2" type="number" min="" max="" name="dcto2" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="fecha_fin">Fecha De Finalizacion</label>\n                                <input class="formulario__input" type="date" id="fecha_fin" name="fecha_fin" value="${t.fecha_fin}" requiered>\n                            </div>\n                            \n                            <input class="clientes-btn" type="submit" value="Actualizar">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1}),function(){const t=document.querySelector("#dcto1"),n=document.querySelector("#tipo");n.addEventListener("change",a=>{t.disabled=!1,e(t.value,n)}),t.addEventListener("input",t=>{e(t.target.value,n)})}()}(o)})}),n.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar la oferta del cliente?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/fidelizacion?id="+t)})})}),a.forEach(e=>{e.addEventListener("click",e=>{e.target.parentElement.dataset.id;Swal.fire({icon:"error",title:"Oops...",text:"clase y metodo de mensaje no configurado!",footer:"Innovatech quindio"})})})}}(),function(){if(document.querySelector("#dashboardcitas")){const n=document.querySelectorAll(".cancelado"),a=document.querySelectorAll(".finalizado");let o;n.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement,n=t.children[0].textContent,a=t.children[7].textContent;"Pendiente"!==a&&"Out"!==a||function(e,t){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea Cancelar La Cita?",text:"SE CANCELARA LA CITA, PUEDES CREAR UNA NUEVA CUANDO LO DESEES.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&(async()=>{try{const n="/admin/api/cancelarcita?id="+e,a=await fetch(n);await a.json()&&(t.textContent="Cancelado",Swal.fire("Cita Cancelada","","success"))}catch(e){console.log(e)}})()})}(n,t.children[7])})}),a.forEach(n=>{n.addEventListener("click",n=>{"Pendiente"===n.target.parentElement.parentElement.parentElement.children[7].textContent&&(Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Terminar Cita",html:'<form class="formulario modalform" action="/admin/citas/finalizar?pagina=1" method="POST">\n                            <input type="hidden" name="id" value="" >\n                            <input type="hidden" name="valor_servicio" value="" >\n                            <input type="hidden" name="idempleado" value="" >\n                            <input type="hidden" name="valordcto" value="0" >\n                            <input type="hidden" name="promodcto" value="0" >\n                            <input type="hidden" name="total" value="" >\n\n                            <p class="orden"></p>\n                            <span class="nameuser"></span>\n                            <span class="nameservice"></span>\n                            <span class="precio"></span>\n\n                            <div class="">\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="valorpromodcto">Aplicar Promocion:</label>\n                                <select class="formulario__select" name="valorpromo" id="valorpromodcto">\n                                    <option value="" disabled selected> Seleccionar Dcto</option>\n                                    <option data-dcto="0" value="0"> Sin Descuento</option>\n                                </select> \n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="totalpagar">Total A Pagar: </label>\n                                <input class="formulario__input" type="number" id="totalpagar" name="totalpagar" value="" readonly required>\n                            </div>\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="mediopago">Elegir Medio De Pago:</label>\n                                <select class="formulario__select" name="idmediospago" id="mediopago">\n                                    <option value="" disabled selected> Seleccionar medio pago</option>\n                                </select> \n                            </div>\n                            \n                            <div class="formulario__campo-2r">\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="recibido">Recibido:</label>\n                                    <input class="formulario__input" type="number" id="recibido" name="recibido" value="" required>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="devolucion">Devolucion:</label>\n                                    <input class="formulario__input" type="number" id="devolucion" name="devolucion" value="" readonly required>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nota">Nota:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nota del pago" id="nota" name="nota" value="">\n                                    <label data-num="64" class="count-charts" for="">64</label>\n                                </div>\n                            </div>\n                            \n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="descuento">Imprimir Recibo: </label>\n                                <div class="formulario__campo-2r">\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_si">Si:</label>\n                                        <input id="imprimir_si" type="radio" value="1" name="imprimir">\n                                    </div>\n                                    <div class="formulario__imprimir">\n                                        <label class="formulario__label" for="imprimir_no">No:</label>\n                                        <input id="imprimir_no" type="radio" value="0" name="imprimir" checked>\n                                    </div>\n                                </div>\n                            </div>\n                            </div>\n    \n                            <input class="clientes-btn" type="submit" value="Pagar">\n                       </form>',showCancelButton:!1,showConfirmButton:!1}),document.querySelector("#recibido").addEventListener("input",t),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})}),l(),function(n){const a=n.target.parentElement.dataset.promodcto||0,l=n.target.parentElement.dataset.promodctovalor||0,i=n.target.parentElement.parentElement.parentElement,r=i.children[0].textContent,c=i.children[1].textContent,s=i.children[3].textContent;o=i.children[3].dataset.precio,document.querySelector("input[name=id]").value=r,document.querySelector("input[name=valor_servicio]").value=o,document.querySelector("input[name=idempleado]").value=i.children[4].dataset.idempleado,document.querySelector(".orden").textContent="Orden: "+r,document.querySelector(".nameuser").textContent=c,document.querySelector(".nameservice").textContent=s,document.querySelector(".precio").textContent="Precio: $"+o;const d=document.querySelector("#valorpromodcto");if(parseInt(a)){const e=document.createElement("option");e.textContent=a+"% - $"+l,e.value=l,e.dataset.dcto=a,d.appendChild(e)}d.addEventListener("change",e);const u=document.querySelector("#totalpagar");u.value=o,u.addEventListener("input",t)}(n))})});const l=async()=>{try{const e="/admin/api/getmediospago",t=await fetch(e);!function(e){const t=document.querySelector("#mediopago");e.forEach(e=>{if("1"===e.estado){const n=document.createElement("OPTION");n.value=e.id,n.textContent=e.mediopago,t.appendChild(n)}})}(await t.json())}catch(e){console.log(e)}};function e(e){document.querySelector("#totalpagar").value=o;const n=parseInt(e.target.value),a=parseInt(document.querySelector("#totalpagar").value);document.querySelector("#totalpagar").value=a-n;const l=e.target.options[this.options.selectedIndex].dataset.dcto;document.querySelector("input[name=promodcto]").value=l,t()}function t(){const e=document.querySelector("input[name=valordcto]"),t=parseInt(document.querySelector("#totalpagar").value),n=document.querySelector("#devolucion"),a=parseInt(document.querySelector("#recibido").value);a>=t?(n.value=a-t,e.value=0):(n.value=0,e.value=t-a),document.querySelector("input[name=total]").value=a-parseInt(n.value)}}}(),function(){if(document.querySelector("#servicios-grafica")){let e,t,n,a,o,l=0;citas100=0,progreso=440,(async()=>{try{const i="/admin/api/alldays",r=await fetch(i),c=await r.json(),s="/admin/api/totalcitas",d=await fetch(s),u=await d.json();c.reverse(),e=c.map(e=>e.fecha),t=c.map(e=>e.totaldia),o=u.filter(e=>"Cancelado"===e.estado),n=u.length-o.length,a=u.filter(e=>"Finalizada"===e.estado),l=a.reduce((e,t)=>e+parseInt(t.facturacion.total),0),n&&(citas100=100*a.length/n),progreso=440*citas100/100,function(){const n=document.getElementById("servicios-grafica").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:[{label:"# of Votes",data:t,borderColor:"#00c8c2",backgroundColor:"#ea580c"}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}(),function(){const e=document.querySelector("circle");e.style.strokeDashoffset=440-progreso,e.classList.add("animacion");document.querySelector(".dailyearning").textContent="$"+l;document.querySelector(".rueda .numero").textContent=Math.round(citas100)+"%"}()}catch(e){console.log(e)}})()}}(),function(){if(document.querySelector(".pagina2malla")){const t=document.querySelector("#selectempleadomalla");let n;function e(e,t){for(let n=0;t<2300;n++){let n=document.createElement("OPTION");(t+=30)%100==60&&(t+=40),n.value=t,n.textContent=t%100==0?parseInt(t/100)+":00":parseInt(t/100)+":"+t%100,e.appendChild(n)}}(async()=>{try{const e="/admin/api/getmalla",t=await fetch(e);n=await t.json()}catch(e){console.log(e)}})(),t.addEventListener("change",t=>{const a=n["empleado_"+t.target.value];document.querySelectorAll('.malla INPUT[type="checkbox"]').forEach(e=>{if(e.checked){e.checked=!1;for(let t=0;t<4;t++)e.parentElement.nextElementSibling.children[t].disabled=!0,0===t?e.parentElement.nextElementSibling.children[0].value="":e.parentElement.nextElementSibling.children[t].options[0].selected=!0}}),a&&a.forEach(t=>{const{inicioturno:n,inidescanso:a,findescanso:o,finturno:l}=t;let i=new Array(n,a,o,l);const r=document.querySelector(`input[data-id="${t.id_dia}"]`);r.checked=!0;for(let e=0;e<4;e++)r.parentElement.nextElementSibling.children[e].disabled=!1;document.querySelector(`#entrada[data-id="${t.id_dia}"]`).value=n.substring(0,2)+":"+n.substring(2,4);let c=document.querySelector(`#inidescanso[data-id="${t.id_dia}"]`);for(let t=0;t<3;t++){e(c,parseInt(i[t]));for(let e=0;e<c.options.length;e++)c.options[e].value==parseInt(i[t+1])&&(c.options[e].selected=!0);c=c.nextElementSibling}})})}}(),function(){if(document.querySelector(".headerapp__menu")){const e=document.querySelector("#btnmenu"),t=document.querySelector(".headerapp__navmenu");e.addEventListener("click",()=>{t.classList.toggle("mostrar")})}}(),document.querySelector(".promociones")&&console.log("promociones"),function(){const e=document.querySelectorAll("#servicio");function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let n=t.target.value.slice(0,e.dataset.num);t.target.value=n,e.textContent=0}})})}document.querySelectorAll(".servicios__eliminar").forEach(e=>{e.addEventListener("click",e=>{let t;e.target.href="/admin/servicios/eliminar",e.preventDefault(),t="I"===e.target.tagName?e.target.parentElement.parentElement.dataset.id:e.target.parentElement.dataset.id,Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea eliminar el servcio?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{if(e.isConfirmed){Swal.fire("Eliminado","","success"),async function(){const e=new FormData;console.log(t),e.append("id",t);try{const n="/admin/api/eliminarservicio",a=await fetch(n,{method:"POST",body:e}),o=await a.json();console.log(o);document.querySelector(`div[data-id="${t}"]`).remove()}catch(e){console.log(e)}}()}})})}),e.forEach(e=>{e.addEventListener("click",e=>{if("DIV"===e.target.tagName||"P"===e.target.tagName||"H4"===e.target.tagName||"SPAN"===e.target.tagName){let n,a,o,l,i;l=l=e.target.dataset.id,i=e.target.dataset.user,"P"!==e.target.tagName&&"H4"!==e.target.tagName||(l=e.target.parentElement.dataset.id,i=e.target.parentElement.dataset.user),"SPAN"===e.target.tagName&&(l=e.target.parentElement.parentElement.dataset.id,i=e.target.parentElement.parentElement.dataset.user),parseInt(i)>1&&(n=document.querySelector(`div[data-id="${l}"] h4`).textContent,a=parseInt(document.querySelector(`div[data-id="${l}"] #precio`).textContent),o=parseInt(document.querySelector(`div[data-id="${l}"] #duracion`).textContent),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:"Desea editar el servcio?",html:`<form class="formulario" action="/admin/servicios/editar" method="POST">\n                                    <input type="hidden" name="id" value="${l}" >\n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="nombre">Nombre:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="text" placeholder="Nombre del servicio" id="nombre" name="nombre" value="${n}" required>\n                                            <label data-num="25" class="count-charts" for="">25</label>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="precio">Precio:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="number" placeholder="Precio del servicio" id="precio" name="precio" value="${a}" requiered>\n                                            <label for="">$</label>\n                                        </div>\n                                    </div>\n                                    <div class="formulario__campo">\n                                        <label class="formulario__label" for="duracion">Duracion:</label>\n                                        <div class="formulario__dato">\n                                            <input class="formulario__input" type="number" min="10" max="120" placeholder="Duracion en minutos del servicio" id="duracion" name="duracion" value="${o}" disabled>\n                                            <label for="">min</label>\n                                        </div>\n                                    </div>\n                                    <input class="formulario__submit--servicio" type="submit" value="Actualizar">\n                            </form>`,showCancelButton:!0,showConfirmButton:!1,cancelButtonText:"Cancelar"}),t())}})}),t(),document.querySelector(".alerta")&&setTimeout(()=>{document.querySelector(".alerta").remove()},5e3)}(),window.swiper=new Swiper("swiper",{el:".slider__contenido",slideClass:"slider__slide",createElements:!0,autoplay:{delay:5e3},loop:!0});
//# sourceMappingURL=bundle.js.map
